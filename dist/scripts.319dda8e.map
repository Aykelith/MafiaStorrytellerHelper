{"version":3,"sources":["scripts/index.js"],"names":["GAME_STEP","WELCOME","GAME_SETUP","PLAYERS_SETUP","NIGHT","GENERATOR","PLAYER_ROLES","Mafia","text","id","Godfather","Serialkiller","Veteran","Vigilante","Policeman","Doctor","Mayor","Clown","roleIsInnocent","role","NIGHT_ROUND","Police","Town","_toText","round","_toText2","_toRoundText","_roleIsForThisRound","ROUND_ACTION","SAVED_BY_DOCTOR","KILLED_IN_NIGHT","LYNCHED","SELF_DEFENCE","GUILTY","INNOCENT","DEFAULT_ROUNDS_ORDER","DEFAULT_PLAYER","name","alive","DEFAULT_GAME_SETTINGS","createHashFromPlayers","players","hash","i","length","WelcomePage","props","parent","state","gameStep","setState","React","Component","GameSetupPage","nightOrder","map","PlayersSetupPage","window","debugMode","timesUsedBullet","timesSavedHimself","parseInt","e","target","value","Object","assign","player","index","keys","console","log","NightPage","calculateNight","bind","renderPlayer","renderDay","renderNight","renderSelectable","renderVeteran","wasProtectedByDoctor","wasSelfDefence","isGuilty","getRoleIndex","getNameIndex","getRoleAlive","countSpecial","resetBetweenRounds","prepareForNextNight","getResultMessage","createHash","night","doctorSelected","veteranSelected","includes","filter","special","count","selectedPlayer","auxSelected","auxUnique","auxActivated","veteranButton","vampireMode","nightCurrentState","nightCurrentOrderIndex","veteranKills","veteranUsedTheBullet","townSelected","action","mafiaSelected","push","serialkillerSelected","vigilanteSelected","clownSelected","policeSelected","policeVeteranSelected","police","doctorVeteranSelected","settings","onClick","className","result","message","__html","person","roundName","_result","dayNumber","index2","isNight","scrollTo","title","subtitle","sort","player1","player2","playersLength","currentRoundPlayers","lastNight","alert","undefined","GeneratorPage","MainPage","gameSettings","slice","packCompresser","JsonUrl","location","decompress","then","json","compress","output","displayBlock","ReactDOM","render","document","getElementById"],"mappings":"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","file":"scripts.319dda8e.map","sourceRoot":"..","sourcesContent":["const GAME_STEP = {\n    WELCOME: 0,\n    GAME_SETUP: 2,\n    PLAYERS_SETUP: 3,\n    NIGHT: 4,\n\n    GENERATOR: 99\n}\n\nconst PLAYER_ROLES = {\n    Mafia: {\n        text: \"Mafiot\",\n        id: 0\n    },\n    Godfather: {\n        text: \"Godfather\",\n        id: 1\n    },\n    Serialkiller: {\n        text: \"Serial killer\",\n        id: 2\n    },\n    Veteran: {\n        text: \"Veteran\",\n        id: 3\n    },\n    Vigilante: {\n        text: \"Vigilentul\",\n        id: 4\n    },\n    Policeman: {\n        text: \"Politist\",\n        id: 5\n    },\n    Doctor: {\n        text: \"Medic\",\n        id: 6\n    },\n    Mayor: {\n        text: \"Primar\",\n        id: 7\n    },\n    Clown: {\n        text: \"Mascarici\",\n        id: 8\n    }\n};\n\nfunction roleIsInnocent(role) {\n    return !(role == \"Mafia\" || role == \"Serialkiller\");\n}\n\nconst NIGHT_ROUND = {\n    Mafia: 0,\n    Serialkiller: 1,\n    Vigilante: 2,\n    Veteran: 3,\n    Police: 4,\n    Doctor: 5,\n    Clown: 6,\n    Town: 7,\n\n    _toText: (round) => {\n        switch (round) {\n            case NIGHT_ROUND.Mafia: return \"Mafia\";\n            case NIGHT_ROUND.Serialkiller: return \"Serialkillerului\";\n            case NIGHT_ROUND.Vigilante: return \"Vigilentului\";\n            case NIGHT_ROUND.Veteran: return \"Veteranului\";\n            case NIGHT_ROUND.Police: return \"Politistii\";\n            case NIGHT_ROUND.Doctor: return \"Doctorii\";\n            case NIGHT_ROUND.Clown: return \"Mascariciului\";\n            case NIGHT_ROUND.Town: return \"Orasul\";\n        }\n\n        return \"Error\";\n    },\n\n    _toText2: (round) => {\n        switch (round) {\n            case NIGHT_ROUND.Mafia: return \"Mafia\";\n            case NIGHT_ROUND.Serialkiller: return \"Serialkillerul\";\n            case NIGHT_ROUND.Vigilante: return \"Vigilentul\";\n            case NIGHT_ROUND.Veteran: return \"Veteranul\";\n            case NIGHT_ROUND.Police: return \"Politistii\";\n            case NIGHT_ROUND.Doctor: return \"Doctorii\";\n            case NIGHT_ROUND.Clown: return \"Mascariciul\";\n            case NIGHT_ROUND.Town: return \"Orasul\";\n        }\n\n        return \"Error\";\n    },\n\n    _toRoundText: (round) => {\n        switch (round) {\n            case NIGHT_ROUND.Mafia: return \"Runda mafiotilor\";\n            case NIGHT_ROUND.Serialkiller: return \"Runda serialkillerului\";\n            case NIGHT_ROUND.Vigilante: return \"Runda vigilentului\";\n            case NIGHT_ROUND.Veteran: return \"Runda veteranului\";\n            case NIGHT_ROUND.Police: return \"Runda politistilor\";\n            case NIGHT_ROUND.Doctor: return \"Runda doctorilor\";\n            case NIGHT_ROUND.Clown: return \"Runda mascariciului\";\n        }\n\n        return \"Error\";\n    },\n\n    _roleIsForThisRound: (round, role) => {\n        switch (round) {\n            case NIGHT_ROUND.Mafia: return role == \"Mafia\" || role == \"Godfather\";\n            case NIGHT_ROUND.Serialkiller: return role == \"Serialkiller\";\n            case NIGHT_ROUND.Vigilante: return role == \"Vigilante\";\n            case NIGHT_ROUND.Veteran: return role == \"Veteran\";\n            case NIGHT_ROUND.Police: return role == \"Policeman\";\n            case NIGHT_ROUND.Doctor: return role == \"Doctor\";\n            case NIGHT_ROUND.Clown: return role == \"Clown\";\n        }\n\n        return false;\n    }\n};\n\nconst ROUND_ACTION = {\n    SAVED_BY_DOCTOR: 0,\n    KILLED_IN_NIGHT: 1,\n    LYNCHED: 2,\n    SELF_DEFENCE: 3,\n    GUILTY: 4,\n    INNOCENT: 5\n}\n\nconst DEFAULT_ROUNDS_ORDER = [ \n    NIGHT_ROUND.Mafia, \n    NIGHT_ROUND.Serialkiller, \n    NIGHT_ROUND.Police, \n    NIGHT_ROUND.Vigilante,\n    NIGHT_ROUND.Doctor,\n    NIGHT_ROUND.Veteran\n];\n\nconst DEFAULT_PLAYER = {\n    name: \"\",\n    role: -1,\n    alive: true\n};\n\nconst DEFAULT_GAME_SETTINGS = {\n\n};\n\nfunction createHashFromPlayers(players) {\n    let hash = \"\";\n    for (let i=0, length=players.length; i < length; ++i) {\n        hash += players[i].name + \"|\" + PLAYER_ROLES[players[i].role].id + \"|\" + (players[i].alive ? \"1\" : \"0\") + \"&\";\n    }\n\n    return hash;\n}\n\nclass WelcomePage extends React.Component {\n    render() {\n        return (\n            <div id=\"welcomePage\" className=\"main\">\n                <h1>Mafia Storyteller Helper</h1>\n                <h2>Created by Aykelith@NiAl</h2>\n                <button \n                    id=\"startBtn\"\n                    onClick={() => {\n                        this.props.parent.state.gameStep = GAME_STEP.GAME_SETUP;\n                        this.props.parent.setState(this.props.parent.state);\n                    }}\n                >\n                    Start\n                </button>\n                <button\n                    id=\"generatorBtn\"\n                    onClick={() => {\n\n                    }}\n                >\n                    Generator\n                </button>\n            </div>\n        );\n    }\n};\n\nclass GameSetupPage extends React.Component {\n    render() {\n        return (\n            <div id=\"gameSetupPage\" className=\"main\">\n                <h2>Game Setup</h2>\n                <div className=\"block\">\n                    <div>Ordinea noptilor:</div>\n                    <div id=\"nightsOrderCnt\">\n                        {\n                            this.props.parent.state.nightOrder.map(round => {\n                                return (\n                                    <div key={`round${round}`}>\n                                        <span>{NIGHT_ROUND._toText2(round)}</span>\n                                        <div>\n                                            \n                                        </div>\n                                    </div>\n                                )\n                            })\n                        }\n                    </div>\n                </div>\n                <button\n                    onClick={() => {\n                        this.props.parent.state.gameStep = GAME_STEP.PLAYERS_SETUP;\n                        this.props.parent.setState(this.props.parent.state);\n                    }}\n                >\n                    Urmatorul\n                </button>\n            </div>\n        )\n    }\n}\n\nclass PlayersSetupPage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        if (window.debugMode) {\n            this.props.parent.state.players = [\n                { name: \"Mafia 1\", role: \"Mafia\", alive: true },\n                { name: \"Mafia 2\", role: \"Mafia\", alive: true },\n                { name: \"Godfather\", role: \"Godfather\", alive: true },\n                { name: \"Policeman\", role: \"Policeman\", alive: true },\n                { name: \"Policeman 2\", role: \"Policeman\", alive: true },\n                { name: \"Veteran\", role: \"Veteran\", alive: true, timesUsedBullet: 0 },\n                { name: \"Vigilante\", role: \"Vigilante\", alive: true },\n                { name: \"Doctor\", role: \"Doctor\", alive: true, timesSavedHimself: 0 },\n                { name: \"Mayor\", role: \"Mayor\", alive: true },\n                { name: \"Clown\", role: \"Clown\", alive: true },\n                { name: \"Serialkiller\", role: \"Serialkiller\", alive: true }\n            ]\n        }\n    }\n    \n    render() {\n        return (\n            <div id=\"playersSetupPage\" className=\"main\">\n                <h2>Players setup</h2>\n                <div>\n                    <span>Numarul de jucatori: </span>\n                    <input\n                        type=\"number\"\n                        value={this.props.parent.state.players.length}\n                        onChange={e => {\n                            this.props.parent.state.players.length = parseInt(e.target.value);\n\n                            for (let i=0, length = this.props.parent.state.players.length; i < length; ++i) {\n                                if (!this.props.parent.state.players[i]) {\n                                    this.props.parent.state.players[i] = Object.assign({}, DEFAULT_PLAYER);\n                                }\n                            }\n\n                            this.props.parent.setState(this.props.parent.state);\n                        }}\n                    />\n                </div>\n                <table>\n                    <thead>\n                        <tr>\n                            <th>Nr</th>\n                            <th>Nume</th>\n                            <th>Rol</th>\n                            <th></th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {\n                            this.props.parent.state.players.map((player, index) => {\n                                return (\n                                    <tr key={`player${index}`}>\n                                        <td>{index}</td>\n                                        <td>\n                                            <input\n                                                type=\"text\"\n                                                value={player.name}\n                                                onChange={e => {\n                                                    this.props.parent.state.players[index].name = e.target.value;\n                                                    this.props.parent.setState(this.props.parent.state);\n                                                }}\n                                            />\n                                        </td>\n                                        <td>\n                                            <select\n                                                value={player.role}\n                                                onChange={e => {\n                                                    this.props.parent.state.players[index].role = e.target.value;\n\n                                                    if (e.target.value == PLAYER_ROLES.Doctor) {\n                                                        this.props.parent.state.players[index].timesSavedHimself = 0;\n                                                    }\n\n                                                    if (e.target.value == PLAYER_ROLES.Veteran) {\n                                                        this.props.parent.state.players[index].timesUsedBullet = 0;\n                                                    }\n\n                                                    this.props.parent.setState(this.props.parent.state);\n                                                }}\n                                            >\n                                                <option value={-1}>Niciun rol</option>\n                                                {\n                                                    Object.keys(PLAYER_ROLES).map(role => {\n                                                        return <option key={role} value={role}>{PLAYER_ROLES[role].text}</option>;\n                                                    })\n                                                }\n                                            </select>\n                                        </td>\n                                        <td></td>\n                                    </tr>\n                                );\n                            })\n                        }\n                    </tbody>\n                </table>\n                <button\n                    onClick={() => {\n                        this.props.parent.state.gameStep = GAME_STEP.NIGHT;\n                        console.log(this.props.parent.state.players);\n                        this.props.parent.setState(this.props.parent.state);\n                    }}\n                >\n                    Incepe jocul\n                </button>\n            </div>\n        )\n    }\n}\n\nclass NightPage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {};\n\n        this.calculateNight = this.calculateNight.bind(this);\n\n        this.renderPlayer = this.renderPlayer.bind(this);\n\n        this.renderDay = this.renderDay.bind(this);\n        this.renderNight = this.renderNight.bind(this);\n\n        this.renderSelectable = this.renderSelectable.bind(this);\n        this.renderVeteran = this.renderVeteran.bind(this);\n\n        this.wasProtectedByDoctor = this.wasProtectedByDoctor.bind(this);\n        this.wasSelfDefence = this.wasSelfDefence.bind(this);\n        this.isGuilty = this.isGuilty.bind(this);\n        this.getRoleIndex = this.getRoleIndex.bind(this);\n        this.getNameIndex = this.getNameIndex.bind(this);\n        this.getRoleAlive = this.getRoleAlive.bind(this);\n        this.countSpecial = this.countSpecial.bind(this);\n\n        this.resetBetweenRounds = this.resetBetweenRounds.bind(this);\n        this.prepareForNextNight = this.prepareForNextNight.bind(this);\n        \n        this.getResultMessage = this.getResultMessage.bind(this);\n    }\n\n    componentDidMount() {\n        this.props.parent.createHash();\n    }\n\n    wasProtectedByDoctor(index) { return this.props.parent.state.night.doctorSelected == index; }\n    wasSelfDefence(index) { return this.props.parent.state.night.veteranSelected == index };\n    isGuilty(index) { return ['Mafia', 'Serialkiller'].includes(this.props.parent.state.players[index].role); }\n    getRoleIndex(role) { \n        for (let i=0, length=this.props.parent.state.players.length; i < length; ++i) {\n            if (this.props.parent.state.players[i].role == role && this.props.parent.state.players[i].alive) return i;\n        } \n\n        return null;\n    }\n    getRoleAlive(role) {\n        return this.props.parent.state.players\n            .filter(player => NIGHT_ROUND._roleIsForThisRound(role, player.role) && player.alive);\n    }\n    getNameIndex(name) {\n        for (let i=0, length=this.props.parent.state.players.length; i < length; ++i) {\n            if (this.props.parent.state.players[i].name == name) return i;\n        } \n\n        return null;\n    }\n    countSpecial(special) {\n        let count = 0;\n        for (let i=0, length=this.props.parent.state.players.length; i < length; ++i) {\n            if (this.props.parent.state.players[i][special]) count += this.props.parent.state.players[i][special];\n        } \n\n        return count;\n    }\n\n    resetBetweenRounds() {\n        this.state.selectedPlayer = null;\n        this.state.auxSelected = null;\n        this.state.auxUnique = false;\n        this.state.auxActivated = false;\n        this.state.veteranButton = null;\n    }\n\n    prepareForNextNight(vampireMode) {\n        this.props.parent.state.nightCurrentState = vampireMode ? NIGHT_ROUND.Clown : this.props.parent.state.nightOrder[this.props.parent.state.nightCurrentOrderIndex];\n\n        if (this.props.parent.state.nightCurrentState == NIGHT_ROUND.Doctor) {\n            this.state.auxActivated = true;\n            this.state.auxUnique = true;\n        }\n    }\n\n    calculateNight() {\n        let night = this.props.parent.state.night;\n        night.veteranKills = [];\n\n        let veteranUsedTheBullet = false;\n\n        console.log(\"NIGHT\", night);\n\n        if (night.townSelected != null) {\n            console.log(\"TOWN\", night.townSelected, this.props.parent.state.players[night.townSelected]);\n            night.townSelected = { id: night.townSelected, action: ROUND_ACTION.KILLED_IN_NIGHT };\n        }\n\n        if (night.mafiaSelected != null) {\n            console.log(\"MAFIA\", night.mafiaSelected, this.props.parent.state.players[night.mafiaSelected]);\n            let action;\n            if (this.wasSelfDefence(night.mafiaSelected)) {\n                console.log(\"   \", \"WAS SELF DEFENCE\", veteranUsedTheBullet);\n                if (!veteranUsedTheBullet) {\n                    ++this.props.parent.state.players[night.mafiaSelected].timesUsedBullet;\n                    veteranUsedTheBullet = true;\n                }\n\n                let id = this.getRoleIndex('Godfather');\n                night.veteranKills.push(id);\n\n                this.props.parent.state.players[id].alive = false;\n\n                action = ROUND_ACTION.SELF_DEFENCE;\n            } else if (this.wasProtectedByDoctor(night.mafiaSelected)) {\n                console.log(\"   \", \"WAS PROTECTED BY DOCTOR\");\n                action = ROUND_ACTION.SAVED_BY_DOCTOR;\n            } else {\n                this.props.parent.state.players[night.mafiaSelected].alive = false;\n                action = ROUND_ACTION.KILLED_IN_NIGHT;\n            }\n\n            night.mafiaSelected = { id: night.mafiaSelected, action: action };\n        }\n        \n        if (night.serialkillerSelected != null) {\n            console.log(\"SERIALKILLER\", night.serialkillerSelected, this.props.parent.state.players[night.serialkillerSelected]);\n\n            let action;\n            if (this.wasSelfDefence(night.serialkillerSelected)) {\n                console.log(\"   \", \"WAS SELF DEFENCE\", veteranUsedTheBullet);\n                if (!veteranUsedTheBullet) {\n                    ++this.props.parent.state.players[night.serialkillerSelected].timesUsedBullet;\n                    veteranUsedTheBullet = true;\n                }\n\n                let id = this.getRoleIndex('Serialkiller');\n                night.veteranKills.push(id);\n\n                this.props.parent.state.players[id].alive = false;\n\n                action = ROUND_ACTION.SELF_DEFENCE;\n            } else if (this.wasProtectedByDoctor(night.serialkillerSelected)) {\n                console.log(\"   \", \"WAS PROTECTED BY DOCTOR\");\n                action = ROUND_ACTION.SAVED_BY_DOCTOR;\n            } else {\n                this.props.parent.state.players[night.serialkillerSelected].alive = false;\n                action = ROUND_ACTION.KILLED_IN_NIGHT;\n            }\n\n            night.serialkillerSelected = { id: night.serialkillerSelected, action: action };\n        }\n        \n        if (night.vigilanteSelected != null) {\n            console.log(\"VIGILANTE\", night.vigilanteSelected, this.props.parent.state.players[night.vigilanteSelected]);\n\n            let action;\n            if (this.wasSelfDefence(night.vigilanteSelected)) {\n                console.log(\"   \", \"WAS SELF DEFENCE\", veteranUsedTheBullet);\n                if (!veteranUsedTheBullet) {\n                    ++this.props.parent.state.players[night.vigilanteSelected].timesUsedBullet;\n                    veteranUsedTheBullet = true;\n                }\n\n                let id = this.getRoleIndex('Vigilante');\n                night.veteranKills.push(id);\n\n                this.props.parent.state.players[id].alive = false;\n                \n                action = ROUND_ACTION.SELF_DEFENCE;\n            } else if (this.wasProtectedByDoctor(night.vigilanteSelected)) {\n                console.log(\"   \", \"WAS PROTECTED BY DOCTOR\");\n                action = ROUND_ACTION.SAVED_BY_DOCTOR;\n            } else {\n                this.props.parent.state.players[night.vigilanteSelected].alive = false;\n                action = ROUND_ACTION.KILLED_IN_NIGHT;\n            }\n\n            night.vigilanteSelected = { id: night.vigilanteSelected, action: action };\n        }\n\n        if (night.clownSelected != null) {\n            console.log(\"CLOWN POWER\");\n            night.clownSelected = { id: night.clownSelected, action: ROUND_ACTION.KILLED_IN_NIGHT };\n        }\n\n        if (night.policeSelected != null) {\n            console.log(\"POLICE\", night.policeSelected, this.props.parent.state.players[night.policeSelected]);\n\n            let action;\n            if (this.wasSelfDefence(night.policeSelected)) {\n                console.log(\"   \", \"WAS SELF DEFENCE\", veteranUsedTheBullet, night.policeVeteranSelected, this.props.parent.state.players[night.policeVeteranSelected]);\n                if (!veteranUsedTheBullet) {\n                    ++this.props.parent.state.players[night.policeSelected].timesUsedBullet;\n                    veteranUsedTheBullet = true;\n                }\n\n                this.props.parent.state.players[night.policeVeteranSelected].alive = false;\n                action = ROUND_ACTION.SELF_DEFENCE;\n            } else {\n                action = 999;\n            }\n\n            night.policeSelected = { id: night.policeSelected, police: this.isGuilty(night.policeSelected) ? ROUND_ACTION.GUILTY : ROUND_ACTION.INNOCENT, action: action };\n        }\n        \n        if (night.doctorSelected != null) {\n            console.log(\"DOCTOR\", night.doctorSelected, this.props.parent.state.players[night.doctorSelected]);\n            if (this.wasSelfDefence(night.doctorSelected)) {\n                if (!night.doctorVeteranSelected) night.doctorVeteranSelected = this.getRoleIndex(\"Doctor\");\n\n                console.log(\"   \", \"WAS SELF DEFENCE\", veteranUsedTheBullet, night.doctorVeteranSelected, this.props.parent.state.players[night.doctorVeteranSelected]);\n                if (!veteranUsedTheBullet) {\n                    ++this.props.parent.state.players[night.doctorSelected].timesUsedBullet;\n                    veteranUsedTheBullet = true;\n                }\n\n                this.props.parent.state.players[night.doctorVeteranSelected].alive = false;\n            } else if (this.props.parent.state.players[night.doctorSelected].role == \"Doctor\") {\n                ++this.props.parent.state.players[night.doctorSelected].timesSavedHimself;\n            }\n\n            night.doctorSelected = { id: night.doctorSelected };\n        }\n\n        if (night.veteranSelected != null && !veteranUsedTheBullet) {\n            ++this.props.parent.state.players[night.veteranSelected].timesUsedBullet;\n            veteranUsedTheBullet = true;\n        }\n    }\n\n    renderPlayer(player, settings) {\n        return (\n            <div onClick={settings.onClick} className={`${player.role} ${settings.className || \"\"}`}>\n                <div>{player.name} {window.debugMode && <span>({this.getNameIndex(player.name)})</span>}</div>\n                <div>{settings.role ? settings.role(player) : PLAYER_ROLES[player.role].text}</div>\n            </div>\n        )\n    }\n\n    getResultMessage(round, result, className) {\n        console.log(NIGHT_ROUND._toText(round), result);\n        if (result == null) {\n            if (round == NIGHT_ROUND.Town) {\n                return <div><span>Orasul a decis sa nu omoare pe nimeni</span></div>\n            }\n    \n            if (round == NIGHT_ROUND.Vigilante) {\n                return <div className={className}><span>Vigilentul a ales sa nu omoare</span></div>\n            }\n\n            if (round == NIGHT_ROUND.Veteran) {\n                return <div className={className}><span>Veteranul a ales sa nu-si foloseasca glontul</span></div>\n            }\n\n            return null;\n        }\n\n        if (round == NIGHT_ROUND.Veteran) {\n            let message = \"Veteranul si-a folosit glontul si-a omorat pe: \";\n\n            let count = this.props.parent.state.night.veteranKills.length;\n            for (let i=0, length=this.props.parent.state.night.veteranKills.length; i < length; ++i) {\n                message += `<b>${this.props.parent.state.players[this.props.parent.state.night.veteranKills[i]].name}(${PLAYER_ROLES[this.props.parent.state.players[this.props.parent.state.night.veteranKills[i]].role].text})</b>,`;\n            }\n\n            if (this.props.parent.state.night.policeVeteranSelected) {\n                ++count;\n                message += `<b>${this.props.parent.state.players[this.props.parent.state.night.policeVeteranSelected].name}(${PLAYER_ROLES[this.props.parent.state.players[this.props.parent.state.night.policeVeteranSelected].role].text})</b>,`;\n            }\n\n            if (this.props.parent.state.night.doctorVeteranSelected) {\n                ++count;\n                message += `<b>${this.props.parent.state.players[this.props.parent.state.night.doctorVeteranSelected].name}(${PLAYER_ROLES[this.props.parent.state.players[this.props.parent.state.night.doctorVeteranSelected].role].text})</b>,`;\n            }\n\n            return <div className={className}>{ count > 0 ? <span dangerouslySetInnerHTML={{ __html: message }}></span> : \"Veteranul si-a folosit glontul dar nu a omorat pe nimeni!\" }</div>;\n        }\n\n        if (round == NIGHT_ROUND.Doctor) {\n            let person = <b>{this.props.parent.state.players[result.id].name}({PLAYER_ROLES[this.props.parent.state.players[result.id].role].text})</b>;\n\n            for (let roundName in this.props.parent.state.night) {\n                let _result = this.props.parent.state.night[roundName];\n                if (typeof _result == 'object' && _result && _result.action == ROUND_ACTION.SAVED_BY_DOCTOR) {\n                    return <div className={className}><span>Doctorii au salvat pe cine trebuia! ({person})</span></div>;\n                }\n            }\n\n            return <div className={className}><span>Doctorii nu au salvat pe cine trebuia! ({person})</span></div>\n        }\n\n        if (round == NIGHT_ROUND.Police) {\n            return <div className={className}><span>Politistii au ales si a iesit {result.police == ROUND_ACTION.GUILTY ? \"necurat\" : \"curat\"} (<b>{this.props.parent.state.players[result.id].name}({PLAYER_ROLES[this.props.parent.state.players[result.id].role].text})</b>)</span></div>\n        }\n\n        if (result.action == ROUND_ACTION.KILLED_IN_NIGHT) {\n            return <div className={className}><span>{NIGHT_ROUND._toText2(round)} au omorat pe <b>{this.props.parent.state.players[result.id].name}({PLAYER_ROLES[this.props.parent.state.players[result.id].role].text})</b></span></div>;\n        } else if (result.action == ROUND_ACTION.SAVED_BY_DOCTOR || result.action == ROUND_ACTION.SELF_DEFENCE) {\n            return <div className={className}><span>{NIGHT_ROUND._toText2(round)} nu au reusit sa omoare pe nimeni (<b>{this.props.parent.state.players[result.id].name}({PLAYER_ROLES[this.props.parent.state.players[result.id].role].text})</b>)</span></div>;\n        }\n\n        return null;\n    }\n\n    renderDay() {\n        console.log(\"RRR\", this.props.parent.state.night);\n\n        return (\n            <div id=\"nightPage_day\" className=\"main\">\n                <h2 id=\"dayNumber\">Ziua {this.props.parent.state.dayNumber}</h2>\n                {\n                    this.props.parent.state.night\n                    &&\n                    <div className=\"playersStatusCnt\">\n                        <h3>Noaptea trecuta</h3>\n                        { this.getResultMessage(NIGHT_ROUND.Town, this.props.parent.state.night.townSelected) }\n                        { this.getResultMessage(NIGHT_ROUND.Mafia, this.props.parent.state.night.mafiaSelected, \"Mafia\") }\n                        { this.getResultMessage(NIGHT_ROUND.Serialkiller, this.props.parent.state.night.serialkillerSelected, \"Serialkiller\") }\n                        { this.getResultMessage(NIGHT_ROUND.Police, this.props.parent.state.night.policeSelected, \"Policeman\") }\n                        { this.getResultMessage(NIGHT_ROUND.Vigilante, this.props.parent.state.night.vigilanteSelected, \"Vigilante\") }\n                        { this.getResultMessage(NIGHT_ROUND.Doctor, this.props.parent.state.night.doctorSelected, \"Doctor\") }\n                        { this.getResultMessage(NIGHT_ROUND.Veteran, this.props.parent.state.night.veteranSelected, \"Veteran\") }\n                        { this.getResultMessage(NIGHT_ROUND.Clown, this.props.parent.state.night.clownSelected, \"Clown\") }\n                    </div>\n                }\n                <div className=\"playersStatusCnt\">\n                    <h3>Lista jucatori</h3>\n                    <h4>(selecteaza un jucator pentru a-l linsa)</h4>\n                    {\n                        this.props.parent.state.players\n                            .map((player, index) => {\n                            let index2 = this.getNameIndex(player.name);\n\n                            return this.renderPlayer(\n                                player, \n                                {\n                                    className: `${this.state.selectedPlayer == index2 ? \"selected\" : \"\"} ${!player.alive ? \"deleted\" : \"\"}`, \n                                    onClick: () => {\n                                        if (!player.alive) return;\n\n                                        this.state.selectedPlayer = this.state.selectedPlayer == index2 ? null : index2;\n                                        this.setState(this.state);\n                                    }\n                                }\n                            );\n                        })\n                    }\n                </div>\n                <button\n                    id=\"startNightBtn\"\n                    onClick={e => {\n                        this.props.parent.state.night = { townSelected: this.state.selectedPlayer }\n                        if (this.state.selectedPlayer) {\n                            this.props.parent.state.players[this.state.selectedPlayer].alive = false;\n\n                            if (this.props.parent.state.players[this.state.selectedPlayer].role == \"Clown\") {\n                                this.state.vampireMode = true;\n                            }\n                        }\n\n                        this.state.selectedPlayer = null;\n                        this.state.auxSelected = null;\n                        this.state.auxActivated = false;\n                        this.state.auxUnique = false;\n                        this.state.veteranButton = null;\n\n                        this.props.parent.state.isNight = true;\n                        ++this.props.parent.state.dayNumber;\n                        this.props.parent.state.nightCurrentState = this.props.parent.state.nightOrder[0];\n                        this.props.parent.state.nightCurrentOrderIndex = 0;\n\n                        if (this.getRoleIndex(\"Godfather\") == null) {\n                            this.state.auxActivated = true;\n                        }\n\n                        this.props.parent.setState(this.props.parent.state, () => { window.scrollTo(0,0); });\n\n                        console.log(\"PLAYERS\", this.props.parent.state.players);\n                    }}\n                >\n                    Incepe noaptea\n                </button>\n            </div>\n        )\n    }\n\n    renderSelectable(settings) {\n        console.log(\"SETTINGS\", settings);\n        return (\n            <div id=\"mafiaStep\" className=\"nightStep\">\n                <div className=\"playersStatusCnt\">\n                    <h3>{settings.title}</h3>\n                    <h4>{settings.subtitle}</h4>\n                    {\n                        this.props.parent.state.players\n                            .filter(player => !NIGHT_ROUND._roleIsForThisRound(this.props.parent.state.nightCurrentState, player.role) && player.alive)\n                            .sort(settings.filter ? settings.filter : (player1, player2) => player1.role > player2.role)\n                            .map((player, index) => {\n                            let index2 = this.getNameIndex(player.name);\n                            return this.renderPlayer(\n                                player, \n                                Object.assign(\n                                    {\n                                        className: settings.className ? \n                                            `${this.state.selectedPlayer == index2 ? \"selected\" : \"\"} ${settings.className(player, index2)}` : \n                                            this.state.selectedPlayer == index2 && \"selected\", \n                                        onClick: () => {\n                                            if (settings.playersLength == 0) return;\n\n                                            this.state.selectedPlayer = this.state.selectedPlayer == index2 ? null : index2;\n                                            if (this.state.auxUnique) this.state.auxSelected = null;\n                                            this.setState(this.state);\n                                        },\n                                    }, \n                                    settings.player || {}\n                                )\n                            );\n                        })\n                    }\n                </div>\n            </div>\n        )\n    }\n\n    renderVeteran() {\n        return (\n            <div id=\"veteranStep\" className=\"nightStep\">\n                <h3>Vrei sa folosesti glontul?</h3>\n                <div id=\"buttonsCnt\">\n                    <button \n                        className={this.state.veteranButton == 1 && 'selected'}\n                        onClick={() => {\n                            this.props.parent.state.night.veteranSelected = this.getRoleIndex('Veteran');\n                            this.state.veteranButton = 1;\n                            this.setState(this.state);\n                        }}\n                    >\n                        Da\n                    </button>\n                    <button \n                        className={this.state.veteranButton == 2 && 'selected'}\n                        onClick={() => {\n                            this.props.parent.state.night.veteranSelected = null;\n                            this.state.veteranButton = 2;\n                            this.setState(this.state);\n                        }}\n                    >\n                        Nu\n                    </button>\n                </div>\n                {\n                    this.props.parent.state.night.veteranSelected\n                    &&\n                    this.props.parent.state.night.policeSelected == this.props.parent.state.night.veteranSelected\n                    && \n                    this.getRoleAlive(NIGHT_ROUND.Police).length > 1\n                    &&\n                    <div className=\"playersStatusCnt\">\n                        <h3>Lista politisti</h3>\n                        <h4>(selecteaza un politist pentru a-l omori)</h4>\n                        {\n                            this.getRoleAlive(NIGHT_ROUND.Police).map((player, index) => {\n                                let index2 = this.getNameIndex(player.name);\n                                return this.renderPlayer(player, \n                                    {\n                                        className: this.props.parent.state.night.policeVeteranSelected == index2 && \"selected\", \n                                        onClick: () => {\n                                            this.props.parent.state.night.policeVeteranSelected = this.props.parent.state.night.policeVeteranSelected == index2 ? null : index2;\n                                            this.props.parent.setState(this.props.parent.state);\n                                        }\n                                    }\n                                );\n                            })\n                        }\n                    </div>\n                }\n                {\n                    this.props.parent.state.night.veteranSelected\n                    &&\n                    this.props.parent.state.night.doctorSelected == this.props.parent.state.night.veteranSelected\n                    && \n                    this.getRoleAlive(NIGHT_ROUND.Doctor).length > 1\n                    &&\n                    <div className=\"playersStatusCnt\">\n                        <h3>Lista doctori</h3>\n                        <h4>(selecteaza un doctor pentru a-l omori)</h4>\n                        {\n                            this.getRoleAlive(NIGHT_ROUND.Doctor).map((player, index) => {\n                                let index2 = this.getNameIndex(player.name);\n                                return this.renderPlayer(player, this.props.parent.state.night.doctorVeteranSelected == index2 && \"selected\", () => {\n                                    this.props.parent.state.night.doctorVeteranSelected = this.props.parent.state.night.doctorVeteranSelected == index2 ? null : index2;\n                                    this.props.parent.setState(this.props.parent.state);\n                                });\n                            })\n                        }\n                    </div>\n                }\n            </div>\n        )\n    }\n\n    renderNight() {\n        let currentRoundPlayers = this.props.parent.state.players\n            .filter(player => NIGHT_ROUND._roleIsForThisRound(this.props.parent.state.nightCurrentState, player.role) && player.alive)\n            .sort((player1, player2) => player1.role > player2.role);\n            \n        return (\n            <div id=\"nightPage_night\" className=\"main\">\n                <h1>{NIGHT_ROUND._toRoundText(this.props.parent.state.nightCurrentState)}</h1>\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Doctor\n                    &&\n                    <div className=\"specialCnt\">Medicii s-or salvat pe ei de {this.countSpecial(\"timesSavedHimself\")} ori</div>\n                }\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Veteran\n                    &&\n                    <div className=\"specialCnt\">Veteranul o folosit glontul de {this.countSpecial(\"timesUsedBullet\")} ori</div>\n                }\n                <div className=\"playersStatusCnt\">\n                    <h3>Lista jucatori</h3>\n                    {\n                        currentRoundPlayers.map((player, index) => {\n                            let index2 = this.getNameIndex(player.name);\n                            return this.renderPlayer(player, \n                                {\n                                    className: this.state.auxActivated && this.state.auxSelected == index2 && \"selected\", \n                                    onClick: () => {\n                                        this.state.auxSelected = this.state.auxSelected == index2 ? null : index2;\n                                        if (this.state.auxUnique) this.state.selectedPlayer = null;\n                                        this.setState(this.state);\n                                    }\n                                }\n                            );\n                        })\n                    }\n                </div>\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Mafia\n                    &&\n                    this.renderSelectable({ title: \"Posibile victime\", subtitle: \"(selecteaza o victima)\", playersLength: currentRoundPlayers.length })\n                }\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Serialkiller\n                    &&\n                    this.renderSelectable({ title: \"Posibile victime\", subtitle: \"(selecteaza o victima)\", playersLength: currentRoundPlayers.length })\n                }\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Police\n                    &&\n                    this.renderSelectable({ \n                        title: \"Posibili criminali\", \n                        subtitle: \"(selecteaza un jucator)\",\n                        filter: (player1, player2) => roleIsInnocent(player1.role) > roleIsInnocent(player2.role),\n                        className: (player, index) => roleIsInnocent(player.role) ? \"innocent\" : \"guilty\",\n                        player: {\n                            role: (player) => roleIsInnocent(player.role) ? \"Inocent\" : \"Vinovant\"\n                        }, \n                        playersLength: currentRoundPlayers.length \n                    })\n                }\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Vigilante\n                    &&\n                    this.renderSelectable({ title: \"Posibile victime\", subtitle: \"(selecteaza o victima sau nu)\", playersLength: currentRoundPlayers.length })\n                }\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Doctor\n                    &&\n                    this.renderSelectable({ title: \"Posibile victime\", subtitle: \"(selecteaza o victima sau nu)\", playersLength: currentRoundPlayers.length })\n                }\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Veteran\n                    &&\n                    this.renderVeteran()\n                }\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Clown\n                    &&\n                    this.renderSelectable({ title: \"Posibile victime\", subtitle: \"(selecteaza o victima)\", playersLength: 1 })\n                }\n                <div id=\"buttonsCnt\">\n                    <button\n                        id=\"backState\"\n                        onClick={() => {\n                            this.resetBetweenRounds();\n\n                            --this.props.parent.state.nightCurrentOrderIndex;\n                            if (this.props.parent.state.nightCurrentOrderIndex == -1) {\n                                this.props.parent.state.isNight = false;\n                                --this.props.parent.state.dayNumber;\n                                this.props.parent.state.night = Object.assign({}, this.props.parent.state.lastNight);\n                            } else {\n                                this.prepareForNextNight();\n                            }\n\n                            this.props.parent.setState(this.props.parent.state, () => { window.scrollTo(0,0); });\n                        }}\n                    >\n                        Inapoi\n                    </button>\n                    <button \n                        id=\"nextState\"\n                        onClick={() => {\n                            if (this.props.parent.state.nightCurrentState == NIGHT_ROUND.Mafia) {\n                                if (currentRoundPlayers.length > 0 && this.state.selectedPlayer == null) {\n                                    return alert(\"Selecteaza un jucator\");\n                                }\n\n                                if (currentRoundPlayers.length > 0 && this.getRoleIndex(\"Godfather\") == null) {\n                                    if (this.state.auxSelected == null) return alert(\"Selecteaza noul Godfather\");\n                                    else {\n                                        this.props.parent.state.players[this.state.auxSelected].role = \"Godfather\";\n                                    }\n                                }\n\n                                this.props.parent.state.night.mafiaSelected = this.state.selectedPlayer;\n                            } else if (this.props.parent.state.nightCurrentState == NIGHT_ROUND.Serialkiller) {\n                                if (currentRoundPlayers.length > 0 && this.state.selectedPlayer == null) {\n                                    return alert(\"Selecteaza un jucator\");\n                                }\n\n                                this.props.parent.state.night.serialkillerSelected = this.state.selectedPlayer;\n                            } else if (this.props.parent.state.nightCurrentState == NIGHT_ROUND.Police) {\n                                if (currentRoundPlayers.length > 0 && this.state.selectedPlayer == null) {\n                                    return alert(\"Selecteaza un jucator\");\n                                }\n\n                                this.props.parent.state.night.policeSelected = this.state.selectedPlayer;\n                            } else if (this.props.parent.state.nightCurrentState == NIGHT_ROUND.Vigilante) {\n                                this.props.parent.state.night.vigilanteSelected = this.state.selectedPlayer;\n                            } else if (this.props.parent.state.nightCurrentState == NIGHT_ROUND.Veteran) {\n                                if (!this.state.veteranButton || this.props.parent.state.night.veteranSelected === undefined) {\n                                    return alert(\"Selecteaza DA sau NU\");\n                                }\n\n                                if (this.props.parent.state.night.veteranSelected) {\n                                    if (this.props.parent.state.night.policeSelected == this.props.parent.state.night.veteranSelected && this.getRoleAlive(NIGHT_ROUND.Police).length > 1 && !this.props.parent.state.night.policeVeteranSelected) {\n                                        return alert(\"Selecteaza un politist\");\n                                    }\n\n                                    if (this.props.parent.state.night.doctorSelected == this.props.parent.state.night.veteranSelected && this.getRoleAlive(NIGHT_ROUND.Doctor).length > 1 && !this.props.parent.state.night.doctorVeteranSelected) {\n                                        return alert(\"Selecteaza un doctor\");\n                                    }\n\n                                    console.log(\"police\", this.props.parent.state.night.policeVeteranSelected);\n                                }\n                            } else if (this.props.parent.state.nightCurrentState == NIGHT_ROUND.Doctor) {\n                                if (currentRoundPlayers.length > 0 && this.state.selectedPlayer == null && this.state.auxSelected == null) {\n                                    return alert(\"Selecteaza un jucator\");\n                                }\n\n                                this.props.parent.state.night.doctorSelected = this.state.selectedPlayer || this.state.auxSelected;\n                            } else if (this.props.parent.state.nightCurrentState == NIGHT_ROUND.Clown) {\n                                if (this.state.selectedPlayer == null) {\n                                    return alert(\"Selecteaza un jucator\");\n                                }\n\n                                this.props.parent.state.night.clownSelected = this.state.selectedPlayer;\n                                this.state.vampireMode = false;\n                                console.log(\"CLOOOWN\");\n                            }\n\n                            this.resetBetweenRounds();\n\n                            ++this.props.parent.state.nightCurrentOrderIndex;\n\n                            if (this.props.parent.state.nightCurrentOrderIndex >= this.props.parent.state.nightOrder.length) {\n                                if (this.state.vampireMode) {\n                                    this.prepareForNextNight(true);\n                                } else {\n                                    this.calculateNight();\n                                    this.props.parent.state.lastNight = Object.assign({}, this.props.parent.state.night);\n                                    this.props.parent.state.isNight = false;\n\n                                    this.props.parent.createHash();\n                                }\n                            } else {\n                                this.prepareForNextNight();\n                            }\n                            \n                            this.props.parent.setState(this.props.parent.state, () => { window.scrollTo(0,0); });\n                        }}\n                    >\n                        Urmatorul\n                    </button>\n                </div>\n            </div>\n        )\n    }\n\n    render() {\n        return this.props.parent.state.isNight ? this.renderNight() : this.renderDay();\n    }\n}\n\nclass GeneratorPage extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        <div id=\"generatorPage\" className=\"main\">\n            <h2>Generator</h2>\n            <div id=\"presetCnt\">\n                <div id=\"presetSelectCnt\">\n                    <span>Preset:</span>\n                </div>\n            </div>\n        </div>\n    }\n};\n\nclass MainPage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            gameStep: GAME_STEP.WELCOME,\n            gameSettings: Object.assign({}, DEFAULT_GAME_SETTINGS),\n\n            players: [],\n            nightOrder: DEFAULT_ROUNDS_ORDER.slice(),\n\n            dayNumber: 1,\n            isNight: false,\n\n            nightCurrentState: null,\n            nightCurrentOrderIndex: 0,\n            night: null,\n            lastNight: null\n        };\n\n        this.createHash = this.createHash.bind(this);\n    }\n\n    componentDidMount() {\n        window.packCompresser = window.JsonUrl('pack'); // JsonUrl is added to the window object\n\n        if (window.location.hash) {\n            window.packCompresser.decompress(window.location.hash)\n                .then(json => { \n                    Object.assign(this.state, json);\n\n                    this.state.lastNight = Object.assign({}, this.state.night);\n\n                    this.state.gameStep = GAME_STEP.NIGHT;\n                    this.setState(this.state);\n                });\n        }\n    }\n\n    createHash() {\n        window.packCompresser.compress(\n            { \n                players: this.state.players, \n                night: this.state.night,\n                dayNumber: this.state.dayNumber\n            }\n        ).then(output => window.location.hash = output);\n    }\n\n    render() {\n        let displayBlock = null;\n        if (this.state.gameStep == GAME_STEP.WELCOME) displayBlock = <WelcomePage parent={this}/>\n        else if (this.state.gameStep == GAME_STEP.GAME_SETUP) displayBlock = <GameSetupPage parent={this}/>\n        else if (this.state.gameStep == GAME_STEP.PLAYERS_SETUP) displayBlock = <PlayersSetupPage parent={this}/>\n        else if (this.state.gameStep == GAME_STEP.NIGHT) displayBlock = <NightPage parent={this}/>\n        else if (this.state.gameStep == GAME_STEP.GENERATOR) displayBlock = <GeneratorPage parent={this}/>\n\n        return displayBlock;\n    }\n};\n\nReactDOM.render(\n    <MainPage/>,\n    document.getElementById('root')\n);"]}