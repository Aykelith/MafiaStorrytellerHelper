parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"g2Hq":[function(require,module,exports) {
function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function n(t,a){return!a||"object"!==e(a)&&"function"!=typeof a?l(t):a}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c={WELCOME:0,GAME_SETUP:2,PLAYERS_SETUP:3,NIGHT:4,GENERATOR:99},p={Mafia:{text:"Mafiot",id:0},Godfather:{text:"Godfather",id:1},Serialkiller:{text:"Serial killer",id:2},Veteran:{text:"Veteran",id:3},Vigilante:{text:"Vigilentul",id:4},Policeman:{text:"Politist",id:5},Doctor:{text:"Medic",id:6},Mayor:{text:"Primar",id:7},Clown:{text:"Mascarici",id:8},Citizen:{text:"Cetatean",id:9}};function u(e){return!("Mafia"==e||"Serialkiller"==e)}var d={Mafia:0,Serialkiller:1,Vigilante:2,Veteran:3,Police:4,Doctor:5,Clown:6,Town:7,_toText:function(e){switch(e){case d.Mafia:return"Mafia";case d.Serialkiller:return"Serialkillerului";case d.Vigilante:return"Vigilentului";case d.Veteran:return"Veteranului";case d.Police:return"Politistii";case d.Doctor:return"Doctorii";case d.Clown:return"Mascariciului";case d.Town:return"Orasul"}return"Error"},_toText2:function(e){switch(e){case d.Mafia:return"Mafia";case d.Serialkiller:return"Serialkillerul";case d.Vigilante:return"Vigilentul";case d.Veteran:return"Veteranul";case d.Police:return"Politistii";case d.Doctor:return"Doctorii";case d.Clown:return"Mascariciul";case d.Town:return"Orasul"}return"Error"},_toRoundText:function(e){switch(e){case d.Mafia:return"Runda mafiotilor";case d.Serialkiller:return"Runda serialkillerului";case d.Vigilante:return"Runda vigilentului";case d.Veteran:return"Runda veteranului";case d.Police:return"Runda politistilor";case d.Doctor:return"Runda doctorilor";case d.Clown:return"Runda mascariciului"}return"Error"},_roleIsForThisRound:function(e,t){switch(e){case d.Mafia:return"Mafia"==t||"Godfather"==t;case d.Serialkiller:return"Serialkiller"==t;case d.Vigilante:return"Vigilante"==t;case d.Veteran:return"Veteran"==t;case d.Police:return"Policeman"==t;case d.Doctor:return"Doctor"==t;case d.Clown:return"Clown"==t}return!1}},h={SAVED_BY_DOCTOR:0,KILLED_IN_NIGHT:1,LYNCHED:2,SELF_DEFENCE:3,GUILTY:4,INNOCENT:5,NOTHING:6},m=[d.Mafia,d.Serialkiller,d.Police,d.Vigilante,d.Doctor,d.Veteran],g={name:"",role:"Citizen",alive:!0},S={};function f(e){for(var t="",a=0,r=e.length;a<r;++a)t+=e[a].name+"|"+p[e[a].role].id+"|"+(e[a].alive?"1":"0")+"&";return t}var v=function(e){function a(){return t(this,a),n(this,s(a).apply(this,arguments))}return i(a,React.Component),r(a,[{key:"render",value:function(){var e=this;return React.createElement("div",{id:"welcomePage",className:"main"},React.createElement("h1",null,"Mafia Storyteller Helper"),React.createElement("h2",null,"Created by Aykelith@NiAl"),React.createElement("button",{id:"startBtn",onClick:function(){e.props.parent.state.gameStep=c.GAME_SETUP,e.props.parent.setState(e.props.parent.state)}},"Start"),React.createElement("button",{id:"generatorBtn",onClick:function(){}},"Generator"),React.createElement("div",{id:"browserStackCnt"},React.createElement("a",{href:"https://www.browserstack.com/",rel:"noopener noreferrer",target:"_blank"},React.createElement("img",{src:"imgs/Browserstack-logo.svg"}))))}}]),a}(),y=function(e){function a(){return t(this,a),n(this,s(a).apply(this,arguments))}return i(a,React.Component),r(a,[{key:"render",value:function(){var e=this;return React.createElement("div",{id:"gameSetupPage",className:"main"},React.createElement("h2",null,"Game Setup"),React.createElement("div",{className:"block"},React.createElement("div",null,"Ordinea noptilor:"),React.createElement("div",{id:"nightsOrderCnt"},this.props.parent.state.nightOrder.map(function(e){return React.createElement("div",{key:"round".concat(e)},React.createElement("span",null,d._toText2(e)),React.createElement("div",null))}))),React.createElement("button",{onClick:function(){e.props.parent.state.gameStep=c.PLAYERS_SETUP,e.props.parent.setState(e.props.parent.state)}},"Urmatorul"))}}]),a}(),E=function(e){function a(e){var r;return t(this,a),r=n(this,s(a).call(this,e)),window.debugMode&&(r.props.parent.state.players=[{name:"Mafia 1",role:"Mafia",alive:!0},{name:"Mafia 2",role:"Mafia",alive:!0},{name:"Godfather",role:"Godfather",alive:!0},{name:"Policeman",role:"Policeman",alive:!0},{name:"Policeman 2",role:"Policeman",alive:!0},{name:"Veteran",role:"Veteran",alive:!0,timesUsedBullet:0},{name:"Vigilante",role:"Vigilante",alive:!0},{name:"Doctor",role:"Doctor",alive:!0,timesSavedHimself:0},{name:"Mayor",role:"Mayor",alive:!0},{name:"Clown",role:"Clown",alive:!0},{name:"Serialkiller",role:"Serialkiller",alive:!0}]),r}return i(a,React.Component),r(a,[{key:"render",value:function(){var e=this;return React.createElement("div",{id:"playersSetupPage",className:"main"},React.createElement("h2",null,"Players setup"),React.createElement("div",null,React.createElement("span",null,"Numarul de jucatori: "),React.createElement("input",{type:"number",value:this.props.parent.state.players.length,onClick:function(e){return e.target.select()},onChange:function(t){var a=parseInt(t.target.value);if(0!=a){e.props.parent.state.players.length=a;for(var r=0,n=e.props.parent.state.players.length;r<n;++r)e.props.parent.state.players[r]||(e.props.parent.state.players[r]=Object.assign({},g));e.props.parent.setState(e.props.parent.state)}else e.props.parent.state.players=[]}})),React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Nr"),React.createElement("th",null,"Nume"),React.createElement("th",null,"Rol"),React.createElement("th",null))),React.createElement("tbody",null,this.props.parent.state.players.map(function(t,a){return React.createElement("tr",{key:"player".concat(a)},React.createElement("td",null,a),React.createElement("td",null,React.createElement("input",{type:"text",value:t.name,onChange:function(t){e.props.parent.state.players[a].name=t.target.value,e.props.parent.setState(e.props.parent.state)}})),React.createElement("td",null,React.createElement("select",{value:t.role,onChange:function(t){e.props.parent.state.players[a].role=t.target.value,"Doctor"==t.target.value&&(e.props.parent.state.players[a].timesSavedHimself=0),"Veteran"==t.target.value&&(e.props.parent.state.players[a].timesUsedBullet=0),e.props.parent.setState(e.props.parent.state)}},Object.keys(p).map(function(e){return React.createElement("option",{key:e,value:e},p[e].text)}))),React.createElement("td",null))}))),React.createElement("button",{onClick:function(){e.props.parent.state.gameStep=c.NIGHT,console.log(e.props.parent.state.players),e.props.parent.setState(e.props.parent.state)}},"Incepe jocul"))}}]),a}(),R=function(a){function o(e){var a;return t(this,o),(a=n(this,s(o).call(this,e))).state={},a.calculateNight=a.calculateNight.bind(l(l(a))),a.renderPlayer=a.renderPlayer.bind(l(l(a))),a.renderDay=a.renderDay.bind(l(l(a))),a.renderNight=a.renderNight.bind(l(l(a))),a.renderSelectable=a.renderSelectable.bind(l(l(a))),a.renderVeteran=a.renderVeteran.bind(l(l(a))),a.wasProtectedByDoctor=a.wasProtectedByDoctor.bind(l(l(a))),a.wasSelfDefence=a.wasSelfDefence.bind(l(l(a))),a.isGuilty=a.isGuilty.bind(l(l(a))),a.getRoleIndex=a.getRoleIndex.bind(l(l(a))),a.getNameIndex=a.getNameIndex.bind(l(l(a))),a.getRoleAlive=a.getRoleAlive.bind(l(l(a))),a.countSpecial=a.countSpecial.bind(l(l(a))),a.resetBetweenRounds=a.resetBetweenRounds.bind(l(l(a))),a.prepareForNextNight=a.prepareForNextNight.bind(l(l(a))),a.getResultMessage=a.getResultMessage.bind(l(l(a))),a}return i(o,React.Component),r(o,[{key:"componentDidMount",value:function(){this.props.parent.createHash()}},{key:"wasProtectedByDoctor",value:function(e){return this.props.parent.state.night.doctorSelected==e}},{key:"wasSelfDefence",value:function(e){return this.props.parent.state.night.veteranSelected==e}},{key:"isGuilty",value:function(e){return["Mafia","Serialkiller"].includes(this.props.parent.state.players[e].role)}},{key:"getRoleIndex",value:function(e){for(var t=0,a=this.props.parent.state.players.length;t<a;++t)if(this.props.parent.state.players[t].role==e&&this.props.parent.state.players[t].alive)return t;return null}},{key:"getRoleAlive",value:function(e){return this.props.parent.state.players.filter(function(t){return d._roleIsForThisRound(e,t.role)&&t.alive})}},{key:"getNameIndex",value:function(e){for(var t=0,a=this.props.parent.state.players.length;t<a;++t)if(this.props.parent.state.players[t].name==e)return t;return null}},{key:"countSpecial",value:function(e){for(var t=0,a=0,r=this.props.parent.state.players.length;a<r;++a)this.props.parent.state.players[a][e]&&(t+=this.props.parent.state.players[a][e]);return t}},{key:"resetBetweenRounds",value:function(){this.state.selectedPlayer=null,this.state.auxSelected=null,this.state.auxUnique=!1,this.state.auxActivated=!1,this.state.veteranButton=null}},{key:"prepareForNextNight",value:function(e){this.props.parent.state.nightCurrentState=e?d.Clown:this.props.parent.state.nightOrder[this.props.parent.state.nightCurrentOrderIndex],this.props.parent.state.nightCurrentState==d.Doctor&&(this.state.auxActivated=!0,this.state.auxUnique=!0)}},{key:"calculateNight",value:function(){var e=this.props.parent.state.night;e.veteranKills=[];var t,a=!1;if(console.log("NIGHT",e),null!=e.townSelected&&(console.log("TOWN",e.townSelected,this.props.parent.state.players[e.townSelected]),e.townSelected={id:e.townSelected,action:h.KILLED_IN_NIGHT}),null!=e.mafiaSelected){var r;if(console.log("MAFIA",e.mafiaSelected,this.props.parent.state.players[e.mafiaSelected]),this.wasSelfDefence(e.mafiaSelected)){console.log("   ","WAS SELF DEFENCE",a),a||(++this.props.parent.state.players[e.mafiaSelected].timesUsedBullet,a=!0);var n=this.getRoleIndex("Godfather");e.veteranKills.push(n),this.props.parent.state.players[n].alive=!1,r=h.SELF_DEFENCE}else if(this.wasProtectedByDoctor(e.mafiaSelected))console.log("   ","WAS PROTECTED BY DOCTOR"),r=h.SAVED_BY_DOCTOR;else{"Serialkiller"==this.props.parent.state.players[e.mafiaSelected].role?r=h.NOTHING:(this.props.parent.state.players[e.mafiaSelected].alive=!1,r=h.KILLED_IN_NIGHT)}e.mafiaSelected={id:e.mafiaSelected,action:r}}if(null!=e.serialkillerSelected){var l;if(console.log("SERIALKILLER",e.serialkillerSelected,this.props.parent.state.players[e.serialkillerSelected]),this.wasSelfDefence(e.serialkillerSelected)){console.log("   ","WAS SELF DEFENCE",a),a||(++this.props.parent.state.players[e.serialkillerSelected].timesUsedBullet,a=!0);var s=this.getRoleIndex("Serialkiller");e.veteranKills.push(s),this.props.parent.state.players[s].alive=!1,l=h.SELF_DEFENCE}else if(this.wasProtectedByDoctor(e.serialkillerSelected))console.log("   ","WAS PROTECTED BY DOCTOR"),l=h.SAVED_BY_DOCTOR;else{var i=this.props.parent.state.players[e.serialkillerSelected].role;"Mafia"==i||"Godfather"==i?l=h.NOTHING:(this.props.parent.state.players[e.serialkillerSelected].alive=!1,l=h.KILLED_IN_NIGHT)}e.serialkillerSelected={id:e.serialkillerSelected,action:l}}if(null!=e.vigilanteSelected){var o;if(console.log("VIGILANTE",e.vigilanteSelected,this.props.parent.state.players[e.vigilanteSelected]),this.wasSelfDefence(e.vigilanteSelected)){console.log("   ","WAS SELF DEFENCE",a),a||(++this.props.parent.state.players[e.vigilanteSelected].timesUsedBullet,a=!0);var c=this.getRoleIndex("Vigilante");e.veteranKills.push(c),this.props.parent.state.players[c].alive=!1,o=h.SELF_DEFENCE}else this.wasProtectedByDoctor(e.vigilanteSelected)?(console.log("   ","WAS PROTECTED BY DOCTOR"),o=h.SAVED_BY_DOCTOR):(this.props.parent.state.players[e.vigilanteSelected].alive=!1,o=h.KILLED_IN_NIGHT);e.vigilanteSelected={id:e.vigilanteSelected,action:o}}(null!=e.clownSelected&&(console.log("CLOWN POWER"),e.clownSelected={id:e.clownSelected,action:h.KILLED_IN_NIGHT}),null!=e.policeSelected)&&(console.log("POLICE",e.policeSelected,this.props.parent.state.players[e.policeSelected]),this.wasSelfDefence(e.policeSelected)?(console.log("   ","WAS SELF DEFENCE",a,e.policeVeteranSelected,this.props.parent.state.players[e.policeVeteranSelected]),a||(++this.props.parent.state.players[e.policeSelected].timesUsedBullet,a=!0),this.props.parent.state.players[e.policeVeteranSelected].alive=!1,t=h.SELF_DEFENCE):t=999,e.policeSelected={id:e.policeSelected,police:this.isGuilty(e.policeSelected)?h.GUILTY:h.INNOCENT,action:t});null!=e.doctorSelected&&(console.log("DOCTOR",e.doctorSelected,this.props.parent.state.players[e.doctorSelected]),this.wasSelfDefence(e.doctorSelected)?(e.doctorVeteranSelected||(e.doctorVeteranSelected=this.getRoleIndex("Doctor")),console.log("   ","WAS SELF DEFENCE",a,e.doctorVeteranSelected,this.props.parent.state.players[e.doctorVeteranSelected]),a||(++this.props.parent.state.players[e.doctorSelected].timesUsedBullet,a=!0),this.props.parent.state.players[e.doctorVeteranSelected].alive=!1):"Doctor"==this.props.parent.state.players[e.doctorSelected].role&&++this.props.parent.state.players[e.doctorSelected].timesSavedHimself,e.doctorSelected={id:e.doctorSelected}),null==e.veteranSelected||a||(++this.props.parent.state.players[e.veteranSelected].timesUsedBullet,a=!0)}},{key:"renderPlayer",value:function(e,t){return React.createElement("div",{onClick:t.onClick,className:"".concat(e.role," ").concat(t.className||"")},React.createElement("div",null,e.name," ",window.debugMode&&React.createElement("span",null,"(",this.getNameIndex(e.name),")")),React.createElement("div",null,t.role?t.role(e):p[e.role].text))}},{key:"getResultMessage",value:function(t,a,r){if(console.log(d._toText(t),a),null==a)return t==d.Town?React.createElement("div",null,React.createElement("span",null,"Orasul a decis sa nu omoare pe nimeni")):t==d.Vigilante?React.createElement("div",{className:r},React.createElement("span",null,"Vigilentul a ales sa nu omoare")):t==d.Veteran?React.createElement("div",{className:r},React.createElement("span",null,"Veteranul a ales sa nu-si foloseasca glontul")):null;if(t==d.Veteran){for(var n="Veteranul si-a folosit glontul si-a omorat pe: ",l=this.props.parent.state.night.veteranKills.length,s=0,i=this.props.parent.state.night.veteranKills.length;s<i;++s)n+="<b>".concat(this.props.parent.state.players[this.props.parent.state.night.veteranKills[s]].name,"(").concat(p[this.props.parent.state.players[this.props.parent.state.night.veteranKills[s]].role].text,")</b>,");return this.props.parent.state.night.policeVeteranSelected&&(++l,n+="<b>".concat(this.props.parent.state.players[this.props.parent.state.night.policeVeteranSelected].name,"(").concat(p[this.props.parent.state.players[this.props.parent.state.night.policeVeteranSelected].role].text,")</b>,")),this.props.parent.state.night.doctorVeteranSelected&&(++l,n+="<b>".concat(this.props.parent.state.players[this.props.parent.state.night.doctorVeteranSelected].name,"(").concat(p[this.props.parent.state.players[this.props.parent.state.night.doctorVeteranSelected].role].text,")</b>,")),React.createElement("div",{className:r},l>0?React.createElement("span",{dangerouslySetInnerHTML:{__html:n}}):"Veteranul si-a folosit glontul dar nu a omorat pe nimeni!")}if(t==d.Doctor){var o=React.createElement("b",null,this.props.parent.state.players[a.id].name,"(",p[this.props.parent.state.players[a.id].role].text,")");for(var c in this.props.parent.state.night){var u=this.props.parent.state.night[c];if("object"==e(u)&&u&&u.action==h.SAVED_BY_DOCTOR)return React.createElement("div",{className:r},React.createElement("span",null,"Doctorii au salvat pe cine trebuia! (",o,")"))}return React.createElement("div",{className:r},React.createElement("span",null,"Doctorii nu au salvat pe cine trebuia! (",o,")"))}return t==d.Police?React.createElement("div",{className:r},React.createElement("span",null,"Politistii au ales si a iesit ",a.police==h.GUILTY?"necurat":"curat"," (",React.createElement("b",null,this.props.parent.state.players[a.id].name,"(",p[this.props.parent.state.players[a.id].role].text,")"),")")):a.action==h.KILLED_IN_NIGHT?React.createElement("div",{className:r},React.createElement("span",null,d._toText2(t)," au omorat pe ",React.createElement("b",null,this.props.parent.state.players[a.id].name,"(",p[this.props.parent.state.players[a.id].role].text,")"))):a.action==h.SAVED_BY_DOCTOR||a.action==h.SELF_DEFENCE?React.createElement("div",{className:r},React.createElement("span",null,d._toText2(t)," nu au reusit sa omoare pe nimeni (",React.createElement("b",null,this.props.parent.state.players[a.id].name,"(",p[this.props.parent.state.players[a.id].role].text,")"),")")):a.action==h.NOTHING?React.createElement("div",{className:r},React.createElement("span",null,d._toText2(t)," nu au omorat pe nimeni (",React.createElement("b",null,this.props.parent.state.players[a.id].name,"(",p[this.props.parent.state.players[a.id].role].text,")"),")")):null}},{key:"renderDay",value:function(){var e=this;return console.log("RRR",this.props.parent.state.night),React.createElement("div",{id:"nightPage_day",className:"main"},React.createElement("h2",{id:"dayNumber"},"Ziua ",this.props.parent.state.dayNumber),this.props.parent.state.night&&React.createElement("div",{className:"playersStatusCnt"},React.createElement("h3",null,"Noaptea trecuta"),this.getResultMessage(d.Town,this.props.parent.state.night.townSelected),this.getResultMessage(d.Mafia,this.props.parent.state.night.mafiaSelected,"Mafia"),this.getResultMessage(d.Serialkiller,this.props.parent.state.night.serialkillerSelected,"Serialkiller"),this.getResultMessage(d.Police,this.props.parent.state.night.policeSelected,"Policeman"),this.getResultMessage(d.Vigilante,this.props.parent.state.night.vigilanteSelected,"Vigilante"),this.getResultMessage(d.Doctor,this.props.parent.state.night.doctorSelected,"Doctor"),this.getResultMessage(d.Veteran,this.props.parent.state.night.veteranSelected,"Veteran"),this.getResultMessage(d.Clown,this.props.parent.state.night.clownSelected,"Clown")),React.createElement("div",{className:"playersStatusCnt"},React.createElement("h3",null,"Lista jucatori"),React.createElement("h4",null,"(selecteaza un jucator pentru a-l linsa)"),this.props.parent.state.players.map(function(t,a){var r=e.getNameIndex(t.name);return e.renderPlayer(t,{className:"".concat(e.state.selectedPlayer==r?"selected":""," ").concat(t.alive?"":"deleted"),onClick:function(){t.alive&&(e.state.selectedPlayer=e.state.selectedPlayer==r?null:r,e.setState(e.state))}})})),React.createElement("button",{id:"startNightBtn",onClick:function(t){e.props.parent.state.night={townSelected:e.state.selectedPlayer},e.state.selectedPlayer&&(e.props.parent.state.players[e.state.selectedPlayer].alive=!1,"Clown"==e.props.parent.state.players[e.state.selectedPlayer].role&&(e.state.vampireMode=!0)),e.state.selectedPlayer=null,e.state.auxSelected=null,e.state.auxActivated=!1,e.state.auxUnique=!1,e.state.veteranButton=null,e.props.parent.state.isNight=!0,++e.props.parent.state.dayNumber,e.props.parent.state.nightCurrentState=e.props.parent.state.nightOrder[0],e.props.parent.state.nightCurrentOrderIndex=0,null==e.getRoleIndex("Godfather")&&(e.state.auxActivated=!0),e.props.parent.setState(e.props.parent.state,function(){window.scrollTo(0,0)}),console.log("PLAYERS",e.props.parent.state.players)}},"Incepe noaptea"))}},{key:"renderSelectable",value:function(e){var t=this;return console.log("SETTINGS",e),React.createElement("div",{id:"mafiaStep",className:"nightStep"},React.createElement("div",{className:"playersStatusCnt"},React.createElement("h3",null,e.title),React.createElement("h4",null,e.subtitle),this.props.parent.state.players.filter(function(e){return!d._roleIsForThisRound(t.props.parent.state.nightCurrentState,e.role)&&e.alive}).sort(e.filter?e.filter:function(e,t){return e.role>t.role}).map(function(a,r){var n=t.getNameIndex(a.name);return t.renderPlayer(a,Object.assign({className:e.className?"".concat(t.state.selectedPlayer==n?"selected":""," ").concat(e.className(a,n)):t.state.selectedPlayer==n&&"selected",onClick:function(){0!=e.playersLength&&(t.state.selectedPlayer=t.state.selectedPlayer==n?null:n,t.state.auxUnique&&(t.state.auxSelected=null),t.setState(t.state))}},e.player||{}))})))}},{key:"renderVeteran",value:function(){var e=this;return React.createElement("div",{id:"veteranStep",className:"nightStep"},React.createElement("h3",null,"Vrei sa folosesti glontul?"),React.createElement("div",{id:"buttonsCnt"},React.createElement("button",{className:1==this.state.veteranButton&&"selected",onClick:function(){e.props.parent.state.night.veteranSelected=e.getRoleIndex("Veteran"),e.state.veteranButton=1,e.setState(e.state)}},"Da"),React.createElement("button",{className:2==this.state.veteranButton&&"selected",onClick:function(){e.props.parent.state.night.veteranSelected=null,e.state.veteranButton=2,e.setState(e.state)}},"Nu")),this.props.parent.state.night.veteranSelected&&this.props.parent.state.night.policeSelected==this.props.parent.state.night.veteranSelected&&this.getRoleAlive(d.Police).length>1&&React.createElement("div",{className:"playersStatusCnt"},React.createElement("h3",null,"Lista politisti"),React.createElement("h4",null,"(selecteaza un politist pentru a-l omori)"),this.getRoleAlive(d.Police).map(function(t,a){var r=e.getNameIndex(t.name);return e.renderPlayer(t,{className:e.props.parent.state.night.policeVeteranSelected==r&&"selected",onClick:function(){e.props.parent.state.night.policeVeteranSelected=e.props.parent.state.night.policeVeteranSelected==r?null:r,e.props.parent.setState(e.props.parent.state)}})})),this.props.parent.state.night.veteranSelected&&this.props.parent.state.night.doctorSelected==this.props.parent.state.night.veteranSelected&&this.getRoleAlive(d.Doctor).length>1&&React.createElement("div",{className:"playersStatusCnt"},React.createElement("h3",null,"Lista doctori"),React.createElement("h4",null,"(selecteaza un doctor pentru a-l omori)"),this.getRoleAlive(d.Doctor).map(function(t,a){var r=e.getNameIndex(t.name);return e.renderPlayer(t,e.props.parent.state.night.doctorVeteranSelected==r&&"selected",function(){e.props.parent.state.night.doctorVeteranSelected=e.props.parent.state.night.doctorVeteranSelected==r?null:r,e.props.parent.setState(e.props.parent.state)})})))}},{key:"renderNight",value:function(){var e=this,t=this.props.parent.state.players.filter(function(t){return d._roleIsForThisRound(e.props.parent.state.nightCurrentState,t.role)&&t.alive}).sort(function(e,t){return e.role>t.role});return React.createElement("div",{id:"nightPage_night",className:"main"},React.createElement("h1",null,d._toRoundText(this.props.parent.state.nightCurrentState)),this.props.parent.state.nightCurrentState==d.Doctor&&React.createElement("div",{className:"specialCnt"},"Medicii s-or salvat pe ei de ",this.countSpecial("timesSavedHimself")," ori"),this.props.parent.state.nightCurrentState==d.Veteran&&React.createElement("div",{className:"specialCnt"},"Veteranul o folosit glontul de ",this.countSpecial("timesUsedBullet")," ori"),React.createElement("div",{className:"playersStatusCnt"},React.createElement("h3",null,"Lista jucatori"),t.map(function(t,a){var r=e.getNameIndex(t.name);return e.renderPlayer(t,{className:e.state.auxActivated&&e.state.auxSelected==r&&"selected",onClick:function(){e.state.auxSelected=e.state.auxSelected==r?null:r,e.state.auxUnique&&(e.state.selectedPlayer=null),e.setState(e.state)}})})),this.props.parent.state.nightCurrentState==d.Mafia&&this.renderSelectable({title:"Posibile victime",subtitle:"(selecteaza o victima)",playersLength:t.length}),this.props.parent.state.nightCurrentState==d.Serialkiller&&this.renderSelectable({title:"Posibile victime",subtitle:"(selecteaza o victima)",playersLength:t.length}),this.props.parent.state.nightCurrentState==d.Police&&this.renderSelectable({title:"Posibili criminali",subtitle:"(selecteaza un jucator)",filter:function(e,t){return u(e.role)>u(t.role)},className:function(e,t){return u(e.role)?"innocent":"guilty"},player:{role:function(e){return"".concat(u(e.role)?"Inocent":"Vinovant"," (").concat(p[e.role].text,")")}},playersLength:t.length}),this.props.parent.state.nightCurrentState==d.Vigilante&&this.renderSelectable({title:"Posibile victime",subtitle:"(selecteaza o victima sau nu)",playersLength:t.length}),this.props.parent.state.nightCurrentState==d.Doctor&&this.renderSelectable({title:"Posibile victime",subtitle:"(selecteaza o victima sau nu)",playersLength:t.length}),this.props.parent.state.nightCurrentState==d.Veteran&&t.length>0&&this.renderVeteran(),this.props.parent.state.nightCurrentState==d.Clown&&this.renderSelectable({title:"Posibile victime",subtitle:"(selecteaza o victima)",playersLength:1}),React.createElement("div",{id:"buttonsCnt"},React.createElement("button",{id:"backState",onClick:function(){e.resetBetweenRounds(),--e.props.parent.state.nightCurrentOrderIndex,-1==e.props.parent.state.nightCurrentOrderIndex?(e.props.parent.state.isNight=!1,--e.props.parent.state.dayNumber,e.props.parent.state.night=Object.assign({},e.props.parent.state.lastNight)):e.prepareForNextNight(),e.props.parent.setState(e.props.parent.state,function(){window.scrollTo(0,0)})}},"Inapoi"),React.createElement("button",{id:"nextState",onClick:function(){if(e.props.parent.state.nightCurrentState==d.Mafia){if(t.length>0&&null==e.state.selectedPlayer)return alert("Selecteaza un jucator");if(t.length>0&&null==e.getRoleIndex("Godfather")){if(null==e.state.auxSelected)return alert("Selecteaza noul Godfather");e.props.parent.state.players[e.state.auxSelected].role="Godfather"}e.props.parent.state.night.mafiaSelected=e.state.selectedPlayer}else if(e.props.parent.state.nightCurrentState==d.Serialkiller){if(t.length>0&&null==e.state.selectedPlayer)return alert("Selecteaza un jucator");e.props.parent.state.night.serialkillerSelected=e.state.selectedPlayer}else if(e.props.parent.state.nightCurrentState==d.Police){if(t.length>0&&null==e.state.selectedPlayer)return alert("Selecteaza un jucator");e.props.parent.state.night.policeSelected=e.state.selectedPlayer}else if(e.props.parent.state.nightCurrentState==d.Vigilante)e.props.parent.state.night.vigilanteSelected=e.state.selectedPlayer;else if(e.props.parent.state.nightCurrentState==d.Veteran){if(t.length>0){if(!e.state.veteranButton||void 0===e.props.parent.state.night.veteranSelected)return alert("Selecteaza DA sau NU");if(e.props.parent.state.night.veteranSelected){if(e.props.parent.state.night.policeSelected==e.props.parent.state.night.veteranSelected&&e.getRoleAlive(d.Police).length>1&&!e.props.parent.state.night.policeVeteranSelected)return alert("Selecteaza un politist");if(e.props.parent.state.night.doctorSelected==e.props.parent.state.night.veteranSelected&&e.getRoleAlive(d.Doctor).length>1&&!e.props.parent.state.night.doctorVeteranSelected)return alert("Selecteaza un doctor");console.log("police",e.props.parent.state.night.policeVeteranSelected)}}}else if(e.props.parent.state.nightCurrentState==d.Doctor){if(t.length>0&&null==e.state.selectedPlayer&&null==e.state.auxSelected)return alert("Selecteaza un jucator");e.props.parent.state.night.doctorSelected=e.state.selectedPlayer||e.state.auxSelected}else if(e.props.parent.state.nightCurrentState==d.Clown){if(null==e.state.selectedPlayer)return alert("Selecteaza un jucator");e.props.parent.state.night.clownSelected=e.state.selectedPlayer,e.state.vampireMode=!1,console.log("CLOOOWN")}e.resetBetweenRounds(),++e.props.parent.state.nightCurrentOrderIndex,e.props.parent.state.nightCurrentOrderIndex>=e.props.parent.state.nightOrder.length?e.state.vampireMode?e.prepareForNextNight(!0):(e.calculateNight(),e.props.parent.state.lastNight=Object.assign({},e.props.parent.state.night),e.props.parent.state.isNight=!1,e.props.parent.createHash()):e.prepareForNextNight(),e.props.parent.setState(e.props.parent.state,function(){window.scrollTo(0,0)})}},"Urmatorul")))}},{key:"render",value:function(){return this.props.parent.state.isNight?this.renderNight():this.renderDay()}}]),o}(),N=function(e){function a(e){return t(this,a),n(this,s(a).call(this,e))}return i(a,React.Component),r(a,[{key:"render",value:function(){React.createElement("div",{id:"generatorPage",className:"main"},React.createElement("h2",null,"Generator"),React.createElement("div",{id:"presetCnt"},React.createElement("div",{id:"presetSelectCnt"},React.createElement("span",null,"Preset:"))))}}]),a}(),C=function(e){function a(e){var r;return t(this,a),(r=n(this,s(a).call(this,e))).state={gameStep:c.WELCOME,gameSettings:Object.assign({},S),players:[],nightOrder:m.slice(),dayNumber:1,isNight:!1,nightCurrentState:null,nightCurrentOrderIndex:0,night:null,lastNight:null},r.createHash=r.createHash.bind(l(l(r))),r}return i(a,React.Component),r(a,[{key:"componentDidMount",value:function(){var e=this;window.packCompresser=window.JsonUrl("pack"),window.location.hash&&window.packCompresser.decompress(window.location.hash).then(function(t){Object.assign(e.state,t),e.state.lastNight=Object.assign({},e.state.night),e.state.gameStep=c.NIGHT,e.setState(e.state)})}},{key:"createHash",value:function(){window.packCompresser.compress({players:this.state.players,night:this.state.night,dayNumber:this.state.dayNumber}).then(function(e){return window.location.hash=e})}},{key:"render",value:function(){var e=null;return this.state.gameStep==c.WELCOME?e=React.createElement(v,{parent:this}):this.state.gameStep==c.GAME_SETUP?e=React.createElement(y,{parent:this}):this.state.gameStep==c.PLAYERS_SETUP?e=React.createElement(E,{parent:this}):this.state.gameStep==c.NIGHT?e=React.createElement(R,{parent:this}):this.state.gameStep==c.GENERATOR&&(e=React.createElement(N,{parent:this})),e}}]),a}();ReactDOM.render(React.createElement(C,null),document.getElementById("root"));
},{}]},{},["g2Hq"], null)
//# sourceMappingURL=/scripts.c935e401.map