{"version":3,"sources":["scripts/index.js"],"names":["GAME_STEP","WELCOME","GAME_SETUP","PLAYERS_SETUP","NIGHT","GENERATOR","PLAYER_ROLES","Mafia","text","id","Godfather","Serialkiller","Veteran","Vigilante","Policeman","Doctor","Mayor","Clown","Citizen","roleIsInnocent","role","NIGHT_ROUND","Police","Town","_toText","round","_toText2","_toRoundText","_roleIsForThisRound","ROUND_ACTION","SAVED_BY_DOCTOR","KILLED_IN_NIGHT","LYNCHED","SELF_DEFENCE","GUILTY","INNOCENT","NOTHING","DEFAULT_ROUNDS_ORDER","DEFAULT_PLAYER","name","alive","DEFAULT_GAME_SETTINGS","createHashFromPlayers","players","hash","i","length","WelcomePage","props","parent","state","gameStep","setState","React","Component","GameSetupPage","nightOrder","map","PlayersSetupPage","window","debugMode","timesUsedBullet","timesSavedHimself","e","target","select","value","parseInt","Object","assign","player","index","keys","console","log","NightPage","calculateNight","bind","renderPlayer","renderDay","renderNight","renderSelectable","renderVeteran","wasProtectedByDoctor","wasSelfDefence","isGuilty","getRoleIndex","getNameIndex","getRoleAlive","countSpecial","resetBetweenRounds","prepareForNextNight","getResultMessage","createHash","night","doctorSelected","veteranSelected","includes","filter","special","count","selectedPlayer","auxSelected","auxUnique","auxActivated","veteranButton","vampireMode","nightCurrentState","nightCurrentOrderIndex","veteranKills","veteranUsedTheBullet","townSelected","action","mafiaSelected","push","selectedPlayerRole","serialkillerSelected","vigilanteSelected","clownSelected","policeSelected","policeVeteranSelected","police","doctorVeteranSelected","settings","onClick","className","result","message","__html","person","roundName","_result","dayNumber","index2","isNight","scrollTo","title","subtitle","sort","player1","player2","playersLength","currentRoundPlayers","lastNight","alert","undefined","GeneratorPage","MainPage","gameSettings","slice","packCompresser","JsonUrl","location","decompress","then","json","compress","output","displayBlock","ReactDOM","render","document","getElementById"],"mappings":"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","file":"scripts.bcf3243b.map","sourceRoot":"..","sourcesContent":["const GAME_STEP = {\n    WELCOME: 0,\n    GAME_SETUP: 2,\n    PLAYERS_SETUP: 3,\n    NIGHT: 4,\n\n    GENERATOR: 99\n}\n\nconst PLAYER_ROLES = {\n    Mafia: {\n        text: \"Mafiot\",\n        id: 0\n    },\n    Godfather: {\n        text: \"Godfather\",\n        id: 1\n    },\n    Serialkiller: {\n        text: \"Serial killer\",\n        id: 2\n    },\n    Veteran: {\n        text: \"Veteran\",\n        id: 3\n    },\n    Vigilante: {\n        text: \"Vigilentul\",\n        id: 4\n    },\n    Policeman: {\n        text: \"Politist\",\n        id: 5\n    },\n    Doctor: {\n        text: \"Medic\",\n        id: 6\n    },\n    Mayor: {\n        text: \"Primar\",\n        id: 7\n    },\n    Clown: {\n        text: \"Mascarici\",\n        id: 8\n    },\n    Citizen: {\n        text: \"Cetatean\",\n        id: 9\n    }\n};\n\nfunction roleIsInnocent(role) {\n    return !(role == \"Mafia\" || role == \"Serialkiller\");\n}\n\nconst NIGHT_ROUND = {\n    Mafia: 0,\n    Serialkiller: 1,\n    Vigilante: 2,\n    Veteran: 3,\n    Police: 4,\n    Doctor: 5,\n    Clown: 6,\n    Town: 7,\n\n    _toText: (round) => {\n        switch (round) {\n            case NIGHT_ROUND.Mafia: return \"Mafia\";\n            case NIGHT_ROUND.Serialkiller: return \"Serialkillerului\";\n            case NIGHT_ROUND.Vigilante: return \"Vigilentului\";\n            case NIGHT_ROUND.Veteran: return \"Veteranului\";\n            case NIGHT_ROUND.Police: return \"Politistii\";\n            case NIGHT_ROUND.Doctor: return \"Doctorii\";\n            case NIGHT_ROUND.Clown: return \"Mascariciului\";\n            case NIGHT_ROUND.Town: return \"Orasul\";\n        }\n\n        return \"Error\";\n    },\n\n    _toText2: (round) => {\n        switch (round) {\n            case NIGHT_ROUND.Mafia: return \"Mafia\";\n            case NIGHT_ROUND.Serialkiller: return \"Serialkillerul\";\n            case NIGHT_ROUND.Vigilante: return \"Vigilentul\";\n            case NIGHT_ROUND.Veteran: return \"Veteranul\";\n            case NIGHT_ROUND.Police: return \"Politistii\";\n            case NIGHT_ROUND.Doctor: return \"Doctorii\";\n            case NIGHT_ROUND.Clown: return \"Mascariciul\";\n            case NIGHT_ROUND.Town: return \"Orasul\";\n        }\n\n        return \"Error\";\n    },\n\n    _toRoundText: (round) => {\n        switch (round) {\n            case NIGHT_ROUND.Mafia: return \"Runda mafiotilor\";\n            case NIGHT_ROUND.Serialkiller: return \"Runda serialkillerului\";\n            case NIGHT_ROUND.Vigilante: return \"Runda vigilentului\";\n            case NIGHT_ROUND.Veteran: return \"Runda veteranului\";\n            case NIGHT_ROUND.Police: return \"Runda politistilor\";\n            case NIGHT_ROUND.Doctor: return \"Runda doctorilor\";\n            case NIGHT_ROUND.Clown: return \"Runda mascariciului\";\n        }\n\n        return \"Error\";\n    },\n\n    _roleIsForThisRound: (round, role) => {\n        switch (round) {\n            case NIGHT_ROUND.Mafia: return role == \"Mafia\" || role == \"Godfather\";\n            case NIGHT_ROUND.Serialkiller: return role == \"Serialkiller\";\n            case NIGHT_ROUND.Vigilante: return role == \"Vigilante\";\n            case NIGHT_ROUND.Veteran: return role == \"Veteran\";\n            case NIGHT_ROUND.Police: return role == \"Policeman\";\n            case NIGHT_ROUND.Doctor: return role == \"Doctor\";\n            case NIGHT_ROUND.Clown: return role == \"Clown\";\n        }\n\n        return false;\n    }\n};\n\nconst ROUND_ACTION = {\n    SAVED_BY_DOCTOR: 0,\n    KILLED_IN_NIGHT: 1,\n    LYNCHED: 2,\n    SELF_DEFENCE: 3,\n    GUILTY: 4,\n    INNOCENT: 5,\n    NOTHING: 6\n}\n\nconst DEFAULT_ROUNDS_ORDER = [ \n    NIGHT_ROUND.Mafia, \n    NIGHT_ROUND.Serialkiller, \n    NIGHT_ROUND.Police, \n    NIGHT_ROUND.Vigilante,\n    NIGHT_ROUND.Doctor,\n    NIGHT_ROUND.Veteran\n];\n\nconst DEFAULT_PLAYER = {\n    name: \"\",\n    role: \"Citizen\",\n    alive: true\n};\n\nconst DEFAULT_GAME_SETTINGS = {\n\n};\n\nfunction createHashFromPlayers(players) {\n    let hash = \"\";\n    for (let i=0, length=players.length; i < length; ++i) {\n        hash += players[i].name + \"|\" + PLAYER_ROLES[players[i].role].id + \"|\" + (players[i].alive ? \"1\" : \"0\") + \"&\";\n    }\n\n    return hash;\n}\n\nclass WelcomePage extends React.Component {\n    render() {\n        return (\n            <div id=\"welcomePage\" className=\"main\">\n                <h1>Mafia Storyteller Helper</h1>\n                <h2>Created by Aykelith@NiAl</h2>\n                <button \n                    id=\"startBtn\"\n                    onClick={() => {\n                        this.props.parent.state.gameStep = GAME_STEP.GAME_SETUP;\n                        this.props.parent.setState(this.props.parent.state);\n                    }}\n                >\n                    Start\n                </button>\n                <button\n                    id=\"generatorBtn\"\n                    onClick={() => {\n\n                    }}\n                >\n                    Generator\n                </button>\n                <div id=\"browserStackCnt\"><a href=\"https://www.browserstack.com/\" rel=\"noopener noreferrer\" target=\"_blank\"><img src=\"imgs/Browserstack-logo.svg\"/></a></div>\n            </div>\n        );\n    }\n};\n\nclass GameSetupPage extends React.Component {\n    render() {\n        return (\n            <div id=\"gameSetupPage\" className=\"main\">\n                <h2>Game Setup</h2>\n                <div className=\"block\">\n                    <div>Ordinea noptilor:</div>\n                    <div id=\"nightsOrderCnt\">\n                        {\n                            this.props.parent.state.nightOrder.map(round => {\n                                return (\n                                    <div key={`round${round}`}>\n                                        <span>{NIGHT_ROUND._toText2(round)}</span>\n                                        <div>\n                                            \n                                        </div>\n                                    </div>\n                                )\n                            })\n                        }\n                    </div>\n                </div>\n                <button\n                    onClick={() => {\n                        this.props.parent.state.gameStep = GAME_STEP.PLAYERS_SETUP;\n                        this.props.parent.setState(this.props.parent.state);\n                    }}\n                >\n                    Urmatorul\n                </button>\n            </div>\n        )\n    }\n}\n\nclass PlayersSetupPage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        if (window.debugMode) {\n            this.props.parent.state.players = [\n                { name: \"Mafia 1\", role: \"Mafia\", alive: true },\n                { name: \"Mafia 2\", role: \"Mafia\", alive: true },\n                { name: \"Godfather\", role: \"Godfather\", alive: true },\n                { name: \"Policeman\", role: \"Policeman\", alive: true },\n                { name: \"Policeman 2\", role: \"Policeman\", alive: true },\n                { name: \"Veteran\", role: \"Veteran\", alive: true, timesUsedBullet: 0 },\n                { name: \"Vigilante\", role: \"Vigilante\", alive: true },\n                { name: \"Doctor\", role: \"Doctor\", alive: true, timesSavedHimself: 0 },\n                { name: \"Mayor\", role: \"Mayor\", alive: true },\n                { name: \"Clown\", role: \"Clown\", alive: true },\n                { name: \"Serialkiller\", role: \"Serialkiller\", alive: true }\n            ]\n        }\n    }\n    \n    render() {\n        return (\n            <div id=\"playersSetupPage\" className=\"main\">\n                <h2>Players setup</h2>\n                <div>\n                    <span>Numarul de jucatori: </span>\n                    <input\n                        type=\"number\"\n                        value={this.props.parent.state.players.length}\n                        onClick={e => e.target.select()}\n                        onChange={e => {\n                            const value = parseInt(e.target.value);\n\n                            if (value == 0) {\n                                this.props.parent.state.players = [];\n                                return;\n                            }\n\n                            this.props.parent.state.players.length = value;\n\n                            for (let i=0, length = this.props.parent.state.players.length; i < length; ++i) {\n                                if (!this.props.parent.state.players[i]) {\n                                    this.props.parent.state.players[i] = Object.assign({}, DEFAULT_PLAYER);\n                                }\n                            }\n\n                            this.props.parent.setState(this.props.parent.state);\n                        }}\n                    />\n                </div>\n                <table>\n                    <thead>\n                        <tr>\n                            <th>Nr</th>\n                            <th>Nume</th>\n                            <th>Rol</th>\n                            <th></th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {\n                            this.props.parent.state.players.map((player, index) => {\n                                return (\n                                    <tr key={`player${index}`}>\n                                        <td>{index}</td>\n                                        <td>\n                                            <input\n                                                type=\"text\"\n                                                value={player.name}\n                                                onChange={e => {\n                                                    this.props.parent.state.players[index].name = e.target.value;\n                                                    this.props.parent.setState(this.props.parent.state);\n                                                }}\n                                            />\n                                        </td>\n                                        <td>\n                                            <select\n                                                value={player.role}\n                                                onChange={e => {\n                                                    this.props.parent.state.players[index].role = e.target.value;\n\n                                                    if (e.target.value == \"Doctor\") {\n                                                        this.props.parent.state.players[index].timesSavedHimself = 0;\n                                                    }\n\n                                                    if (e.target.value == \"Veteran\") {\n                                                        this.props.parent.state.players[index].timesUsedBullet = 0;\n                                                    }\n\n                                                    this.props.parent.setState(this.props.parent.state);\n                                                }}\n                                            >\n                                                {\n                                                    Object.keys(PLAYER_ROLES).map(role => {\n                                                        return <option key={role} value={role}>{PLAYER_ROLES[role].text}</option>;\n                                                    })\n                                                }\n                                            </select>\n                                        </td>\n                                        <td></td>\n                                    </tr>\n                                );\n                            })\n                        }\n                    </tbody>\n                </table>\n                <button\n                    onClick={() => {\n                        this.props.parent.state.gameStep = GAME_STEP.NIGHT;\n                        console.log(this.props.parent.state.players);\n                        this.props.parent.setState(this.props.parent.state);\n                    }}\n                >\n                    Incepe jocul\n                </button>\n            </div>\n        )\n    }\n}\n\nclass NightPage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {};\n\n        this.calculateNight = this.calculateNight.bind(this);\n\n        this.renderPlayer = this.renderPlayer.bind(this);\n\n        this.renderDay = this.renderDay.bind(this);\n        this.renderNight = this.renderNight.bind(this);\n\n        this.renderSelectable = this.renderSelectable.bind(this);\n        this.renderVeteran = this.renderVeteran.bind(this);\n\n        this.wasProtectedByDoctor = this.wasProtectedByDoctor.bind(this);\n        this.wasSelfDefence = this.wasSelfDefence.bind(this);\n        this.isGuilty = this.isGuilty.bind(this);\n        this.getRoleIndex = this.getRoleIndex.bind(this);\n        this.getNameIndex = this.getNameIndex.bind(this);\n        this.getRoleAlive = this.getRoleAlive.bind(this);\n        this.countSpecial = this.countSpecial.bind(this);\n\n        this.resetBetweenRounds = this.resetBetweenRounds.bind(this);\n        this.prepareForNextNight = this.prepareForNextNight.bind(this);\n        \n        this.getResultMessage = this.getResultMessage.bind(this);\n    }\n\n    componentDidMount() {\n        this.props.parent.createHash();\n    }\n\n    wasProtectedByDoctor(index) { return this.props.parent.state.night.doctorSelected == index; }\n    wasSelfDefence(index) { return this.props.parent.state.night.veteranSelected == index };\n    isGuilty(index) { return ['Mafia', 'Serialkiller'].includes(this.props.parent.state.players[index].role); }\n    getRoleIndex(role) { \n        for (let i=0, length=this.props.parent.state.players.length; i < length; ++i) {\n            if (this.props.parent.state.players[i].role == role && this.props.parent.state.players[i].alive) return i;\n        } \n\n        return null;\n    }\n    getRoleAlive(role) {\n        return this.props.parent.state.players\n            .filter(player => NIGHT_ROUND._roleIsForThisRound(role, player.role) && player.alive);\n    }\n    getNameIndex(name) {\n        for (let i=0, length=this.props.parent.state.players.length; i < length; ++i) {\n            if (this.props.parent.state.players[i].name == name) return i;\n        } \n\n        return null;\n    }\n    countSpecial(special) {\n        let count = 0;\n        for (let i=0, length=this.props.parent.state.players.length; i < length; ++i) {\n            if (this.props.parent.state.players[i][special]) count += this.props.parent.state.players[i][special];\n        } \n\n        return count;\n    }\n\n    resetBetweenRounds() {\n        this.state.selectedPlayer = null;\n        this.state.auxSelected = null;\n        this.state.auxUnique = false;\n        this.state.auxActivated = false;\n        this.state.veteranButton = null;\n    }\n\n    prepareForNextNight(vampireMode) {\n        this.props.parent.state.nightCurrentState = vampireMode ? NIGHT_ROUND.Clown : this.props.parent.state.nightOrder[this.props.parent.state.nightCurrentOrderIndex];\n\n        if (this.props.parent.state.nightCurrentState == NIGHT_ROUND.Doctor) {\n            this.state.auxActivated = true;\n            this.state.auxUnique = true;\n        }\n    }\n\n    calculateNight() {\n        let night = this.props.parent.state.night;\n        night.veteranKills = [];\n\n        let veteranUsedTheBullet = false;\n\n        console.log(\"NIGHT\", night);\n\n        if (night.townSelected != null) {\n            console.log(\"TOWN\", night.townSelected, this.props.parent.state.players[night.townSelected]);\n            night.townSelected = { id: night.townSelected, action: ROUND_ACTION.KILLED_IN_NIGHT };\n        }\n\n        if (night.mafiaSelected != null) {\n            console.log(\"MAFIA\", night.mafiaSelected, this.props.parent.state.players[night.mafiaSelected]);\n            let action;\n            if (this.wasSelfDefence(night.mafiaSelected)) {\n                console.log(\"   \", \"WAS SELF DEFENCE\", veteranUsedTheBullet);\n                if (!veteranUsedTheBullet) {\n                    ++this.props.parent.state.players[night.mafiaSelected].timesUsedBullet;\n                    veteranUsedTheBullet = true;\n                }\n\n                let id = this.getRoleIndex('Godfather');\n                night.veteranKills.push(id);\n\n                this.props.parent.state.players[id].alive = false;\n\n                action = ROUND_ACTION.SELF_DEFENCE;\n            } else if (this.wasProtectedByDoctor(night.mafiaSelected)) {\n                console.log(\"   \", \"WAS PROTECTED BY DOCTOR\");\n                action = ROUND_ACTION.SAVED_BY_DOCTOR;\n            } else {\n                let selectedPlayerRole = this.props.parent.state.players[night.mafiaSelected].role;\n\n                if (selectedPlayerRole == \"Serialkiller\") {\n                    action = ROUND_ACTION.NOTHING;\n                } else {\n                    this.props.parent.state.players[night.mafiaSelected].alive = false;\n                    action = ROUND_ACTION.KILLED_IN_NIGHT;\n                }\n            }\n\n            night.mafiaSelected = { id: night.mafiaSelected, action: action };\n        }\n        \n        if (night.serialkillerSelected != null) {\n            console.log(\"SERIALKILLER\", night.serialkillerSelected, this.props.parent.state.players[night.serialkillerSelected]);\n\n            let action;\n            if (this.wasSelfDefence(night.serialkillerSelected)) {\n                console.log(\"   \", \"WAS SELF DEFENCE\", veteranUsedTheBullet);\n                if (!veteranUsedTheBullet) {\n                    ++this.props.parent.state.players[night.serialkillerSelected].timesUsedBullet;\n                    veteranUsedTheBullet = true;\n                }\n\n                let id = this.getRoleIndex('Serialkiller');\n                night.veteranKills.push(id);\n\n                this.props.parent.state.players[id].alive = false;\n\n                action = ROUND_ACTION.SELF_DEFENCE;\n            } else if (this.wasProtectedByDoctor(night.serialkillerSelected)) {\n                console.log(\"   \", \"WAS PROTECTED BY DOCTOR\");\n                action = ROUND_ACTION.SAVED_BY_DOCTOR;\n            } else {\n                let selectedPlayerRole = this.props.parent.state.players[night.serialkillerSelected].role;\n\n                if (selectedPlayerRole == \"Mafia\" || selectedPlayerRole == \"Godfather\") {\n                    action = ROUND_ACTION.NOTHING;\n                } else {\n                    this.props.parent.state.players[night.serialkillerSelected].alive = false;\n                    action = ROUND_ACTION.KILLED_IN_NIGHT;\n                }\n            }\n\n            night.serialkillerSelected = { id: night.serialkillerSelected, action: action };\n        }\n        \n        if (night.vigilanteSelected != null) {\n            console.log(\"VIGILANTE\", night.vigilanteSelected, this.props.parent.state.players[night.vigilanteSelected]);\n\n            let action;\n            if (this.wasSelfDefence(night.vigilanteSelected)) {\n                console.log(\"   \", \"WAS SELF DEFENCE\", veteranUsedTheBullet);\n                if (!veteranUsedTheBullet) {\n                    ++this.props.parent.state.players[night.vigilanteSelected].timesUsedBullet;\n                    veteranUsedTheBullet = true;\n                }\n\n                let id = this.getRoleIndex('Vigilante');\n                night.veteranKills.push(id);\n\n                this.props.parent.state.players[id].alive = false;\n                \n                action = ROUND_ACTION.SELF_DEFENCE;\n            } else if (this.wasProtectedByDoctor(night.vigilanteSelected)) {\n                console.log(\"   \", \"WAS PROTECTED BY DOCTOR\");\n                action = ROUND_ACTION.SAVED_BY_DOCTOR;\n            } else {\n                this.props.parent.state.players[night.vigilanteSelected].alive = false;\n                action = ROUND_ACTION.KILLED_IN_NIGHT;\n            }\n\n            night.vigilanteSelected = { id: night.vigilanteSelected, action: action };\n        }\n\n        if (night.clownSelected != null) {\n            console.log(\"CLOWN POWER\");\n            night.clownSelected = { id: night.clownSelected, action: ROUND_ACTION.KILLED_IN_NIGHT };\n        }\n\n        if (night.policeSelected != null) {\n            console.log(\"POLICE\", night.policeSelected, this.props.parent.state.players[night.policeSelected]);\n\n            let action;\n            if (this.wasSelfDefence(night.policeSelected)) {\n                console.log(\"   \", \"WAS SELF DEFENCE\", veteranUsedTheBullet, night.policeVeteranSelected, this.props.parent.state.players[night.policeVeteranSelected]);\n                if (!veteranUsedTheBullet) {\n                    ++this.props.parent.state.players[night.policeSelected].timesUsedBullet;\n                    veteranUsedTheBullet = true;\n                }\n\n                this.props.parent.state.players[night.policeVeteranSelected].alive = false;\n                action = ROUND_ACTION.SELF_DEFENCE;\n            } else {\n                action = 999;\n            }\n\n            night.policeSelected = { id: night.policeSelected, police: this.isGuilty(night.policeSelected) ? ROUND_ACTION.GUILTY : ROUND_ACTION.INNOCENT, action: action };\n        }\n        \n        if (night.doctorSelected != null) {\n            console.log(\"DOCTOR\", night.doctorSelected, this.props.parent.state.players[night.doctorSelected]);\n            if (this.wasSelfDefence(night.doctorSelected)) {\n                if (!night.doctorVeteranSelected) night.doctorVeteranSelected = this.getRoleIndex(\"Doctor\");\n\n                console.log(\"   \", \"WAS SELF DEFENCE\", veteranUsedTheBullet, night.doctorVeteranSelected, this.props.parent.state.players[night.doctorVeteranSelected]);\n                if (!veteranUsedTheBullet) {\n                    ++this.props.parent.state.players[night.doctorSelected].timesUsedBullet;\n                    veteranUsedTheBullet = true;\n                }\n\n                this.props.parent.state.players[night.doctorVeteranSelected].alive = false;\n            } else if (this.props.parent.state.players[night.doctorSelected].role == \"Doctor\") {\n                ++this.props.parent.state.players[night.doctorSelected].timesSavedHimself;\n            }\n\n            night.doctorSelected = { id: night.doctorSelected };\n        }\n\n        if (night.veteranSelected != null && !veteranUsedTheBullet) {\n            ++this.props.parent.state.players[night.veteranSelected].timesUsedBullet;\n            veteranUsedTheBullet = true;\n        }\n    }\n\n    renderPlayer(player, settings) {\n        return (\n            <div onClick={settings.onClick} className={`${player.role} ${settings.className || \"\"}`}>\n                <div>{player.name} {window.debugMode && <span>({this.getNameIndex(player.name)})</span>}</div>\n                <div>{settings.role ? settings.role(player) : PLAYER_ROLES[player.role].text}</div>\n            </div>\n        )\n    }\n\n    getResultMessage(round, result, className) {\n        console.log(NIGHT_ROUND._toText(round), result);\n        if (result == null) {\n            if (round == NIGHT_ROUND.Town) {\n                return <div><span>Orasul a decis sa nu omoare pe nimeni</span></div>\n            }\n    \n            if (round == NIGHT_ROUND.Vigilante) {\n                return <div className={className}><span>Vigilentul a ales sa nu omoare</span></div>\n            }\n\n            if (round == NIGHT_ROUND.Veteran) {\n                return <div className={className}><span>Veteranul a ales sa nu-si foloseasca glontul</span></div>\n            }\n\n            return null;\n        }\n\n        if (round == NIGHT_ROUND.Veteran) {\n            let message = \"Veteranul si-a folosit glontul si-a omorat pe: \";\n\n            let count = this.props.parent.state.night.veteranKills.length;\n            for (let i=0, length=this.props.parent.state.night.veteranKills.length; i < length; ++i) {\n                message += `<b>${this.props.parent.state.players[this.props.parent.state.night.veteranKills[i]].name}(${PLAYER_ROLES[this.props.parent.state.players[this.props.parent.state.night.veteranKills[i]].role].text})</b>,`;\n            }\n\n            if (this.props.parent.state.night.policeVeteranSelected) {\n                ++count;\n                message += `<b>${this.props.parent.state.players[this.props.parent.state.night.policeVeteranSelected].name}(${PLAYER_ROLES[this.props.parent.state.players[this.props.parent.state.night.policeVeteranSelected].role].text})</b>,`;\n            }\n\n            if (this.props.parent.state.night.doctorVeteranSelected) {\n                ++count;\n                message += `<b>${this.props.parent.state.players[this.props.parent.state.night.doctorVeteranSelected].name}(${PLAYER_ROLES[this.props.parent.state.players[this.props.parent.state.night.doctorVeteranSelected].role].text})</b>,`;\n            }\n\n            return <div className={className}>{ count > 0 ? <span dangerouslySetInnerHTML={{ __html: message }}></span> : \"Veteranul si-a folosit glontul dar nu a omorat pe nimeni!\" }</div>;\n        }\n\n        if (round == NIGHT_ROUND.Doctor) {\n            let person = <b>{this.props.parent.state.players[result.id].name}({PLAYER_ROLES[this.props.parent.state.players[result.id].role].text})</b>;\n\n            for (let roundName in this.props.parent.state.night) {\n                let _result = this.props.parent.state.night[roundName];\n                if (typeof _result == 'object' && _result && _result.action == ROUND_ACTION.SAVED_BY_DOCTOR) {\n                    return <div className={className}><span>Doctorii au salvat pe cine trebuia! ({person})</span></div>;\n                }\n            }\n\n            return <div className={className}><span>Doctorii nu au salvat pe cine trebuia! ({person})</span></div>\n        }\n\n        if (round == NIGHT_ROUND.Police) {\n            return <div className={className}><span>Politistii au ales si a iesit {result.police == ROUND_ACTION.GUILTY ? \"necurat\" : \"curat\"} (<b>{this.props.parent.state.players[result.id].name}({PLAYER_ROLES[this.props.parent.state.players[result.id].role].text})</b>)</span></div>\n        }\n\n        if (result.action == ROUND_ACTION.KILLED_IN_NIGHT) {\n            return <div className={className}><span>{NIGHT_ROUND._toText2(round)} au omorat pe <b>{this.props.parent.state.players[result.id].name}({PLAYER_ROLES[this.props.parent.state.players[result.id].role].text})</b></span></div>;\n        } else if (result.action == ROUND_ACTION.SAVED_BY_DOCTOR || result.action == ROUND_ACTION.SELF_DEFENCE) {\n            return <div className={className}><span>{NIGHT_ROUND._toText2(round)} nu au reusit sa omoare pe nimeni (<b>{this.props.parent.state.players[result.id].name}({PLAYER_ROLES[this.props.parent.state.players[result.id].role].text})</b>)</span></div>;\n        }\n\n        if (result.action == ROUND_ACTION.NOTHING) {\n            return <div className={className}><span>{NIGHT_ROUND._toText2(round)} nu au omorat pe nimeni (<b>{this.props.parent.state.players[result.id].name}({PLAYER_ROLES[this.props.parent.state.players[result.id].role].text})</b>)</span></div>\n        }\n\n        return null;\n    }\n\n    renderDay() {\n        console.log(\"RRR\", this.props.parent.state.night);\n\n        return (\n            <div id=\"nightPage_day\" className=\"main\">\n                <h2 id=\"dayNumber\">Ziua {this.props.parent.state.dayNumber}</h2>\n                {\n                    this.props.parent.state.night\n                    &&\n                    <div className=\"playersStatusCnt\">\n                        <h3>Noaptea trecuta</h3>\n                        { this.getResultMessage(NIGHT_ROUND.Town, this.props.parent.state.night.townSelected) }\n                        { this.getResultMessage(NIGHT_ROUND.Mafia, this.props.parent.state.night.mafiaSelected, \"Mafia\") }\n                        { this.getResultMessage(NIGHT_ROUND.Serialkiller, this.props.parent.state.night.serialkillerSelected, \"Serialkiller\") }\n                        { this.getResultMessage(NIGHT_ROUND.Police, this.props.parent.state.night.policeSelected, \"Policeman\") }\n                        { this.getResultMessage(NIGHT_ROUND.Vigilante, this.props.parent.state.night.vigilanteSelected, \"Vigilante\") }\n                        { this.getResultMessage(NIGHT_ROUND.Doctor, this.props.parent.state.night.doctorSelected, \"Doctor\") }\n                        { this.getResultMessage(NIGHT_ROUND.Veteran, this.props.parent.state.night.veteranSelected, \"Veteran\") }\n                        { this.getResultMessage(NIGHT_ROUND.Clown, this.props.parent.state.night.clownSelected, \"Clown\") }\n                    </div>\n                }\n                <div className=\"playersStatusCnt\">\n                    <h3>Lista jucatori</h3>\n                    <h4>(selecteaza un jucator pentru a-l linsa)</h4>\n                    {\n                        this.props.parent.state.players\n                            .map((player, index) => {\n                            let index2 = this.getNameIndex(player.name);\n\n                            return this.renderPlayer(\n                                player, \n                                {\n                                    className: `${this.state.selectedPlayer == index2 ? \"selected\" : \"\"} ${!player.alive ? \"deleted\" : \"\"}`, \n                                    onClick: () => {\n                                        if (!player.alive) return;\n\n                                        this.state.selectedPlayer = this.state.selectedPlayer == index2 ? null : index2;\n                                        this.setState(this.state);\n                                    }\n                                }\n                            );\n                        })\n                    }\n                </div>\n                <button\n                    id=\"startNightBtn\"\n                    onClick={e => {\n                        this.props.parent.state.night = { townSelected: this.state.selectedPlayer }\n                        if (this.state.selectedPlayer) {\n                            this.props.parent.state.players[this.state.selectedPlayer].alive = false;\n\n                            if (this.props.parent.state.players[this.state.selectedPlayer].role == \"Clown\") {\n                                this.state.vampireMode = true;\n                            }\n                        }\n\n                        this.state.selectedPlayer = null;\n                        this.state.auxSelected = null;\n                        this.state.auxActivated = false;\n                        this.state.auxUnique = false;\n                        this.state.veteranButton = null;\n\n                        this.props.parent.state.isNight = true;\n                        ++this.props.parent.state.dayNumber;\n                        this.props.parent.state.nightCurrentState = this.props.parent.state.nightOrder[0];\n                        this.props.parent.state.nightCurrentOrderIndex = 0;\n\n                        if (this.getRoleIndex(\"Godfather\") == null) {\n                            this.state.auxActivated = true;\n                        }\n\n                        this.props.parent.setState(this.props.parent.state, () => { window.scrollTo(0,0); });\n\n                        console.log(\"PLAYERS\", this.props.parent.state.players);\n                    }}\n                >\n                    Incepe noaptea\n                </button>\n            </div>\n        )\n    }\n\n    renderSelectable(settings) {\n        console.log(\"SETTINGS\", settings);\n        return (\n            <div id=\"mafiaStep\" className=\"nightStep\">\n                <div className=\"playersStatusCnt\">\n                    <h3>{settings.title}</h3>\n                    <h4>{settings.subtitle}</h4>\n                    {\n                        this.props.parent.state.players\n                            .filter(player => !NIGHT_ROUND._roleIsForThisRound(this.props.parent.state.nightCurrentState, player.role) && player.alive)\n                            .sort(settings.filter ? settings.filter : (player1, player2) => player1.role > player2.role)\n                            .map((player, index) => {\n                            let index2 = this.getNameIndex(player.name);\n                            return this.renderPlayer(\n                                player, \n                                Object.assign(\n                                    {\n                                        className: settings.className ? \n                                            `${this.state.selectedPlayer == index2 ? \"selected\" : \"\"} ${settings.className(player, index2)}` : \n                                            this.state.selectedPlayer == index2 && \"selected\", \n                                        onClick: () => {\n                                            if (settings.playersLength == 0) return;\n\n                                            this.state.selectedPlayer = this.state.selectedPlayer == index2 ? null : index2;\n                                            if (this.state.auxUnique) this.state.auxSelected = null;\n                                            this.setState(this.state);\n                                        },\n                                    }, \n                                    settings.player || {}\n                                )\n                            );\n                        })\n                    }\n                </div>\n            </div>\n        )\n    }\n\n    renderVeteran() {\n        return (\n            <div id=\"veteranStep\" className=\"nightStep\">\n                <h3>Vrei sa folosesti glontul?</h3>\n                <div id=\"buttonsCnt\">\n                    <button \n                        className={this.state.veteranButton == 1 && 'selected'}\n                        onClick={() => {\n                            this.props.parent.state.night.veteranSelected = this.getRoleIndex('Veteran');\n                            this.state.veteranButton = 1;\n                            this.setState(this.state);\n                        }}\n                    >\n                        Da\n                    </button>\n                    <button \n                        className={this.state.veteranButton == 2 && 'selected'}\n                        onClick={() => {\n                            this.props.parent.state.night.veteranSelected = null;\n                            this.state.veteranButton = 2;\n                            this.setState(this.state);\n                        }}\n                    >\n                        Nu\n                    </button>\n                </div>\n                {\n                    this.props.parent.state.night.veteranSelected\n                    &&\n                    this.props.parent.state.night.policeSelected == this.props.parent.state.night.veteranSelected\n                    && \n                    this.getRoleAlive(NIGHT_ROUND.Police).length > 1\n                    &&\n                    <div className=\"playersStatusCnt\">\n                        <h3>Lista politisti</h3>\n                        <h4>(selecteaza un politist pentru a-l omori)</h4>\n                        {\n                            this.getRoleAlive(NIGHT_ROUND.Police).map((player, index) => {\n                                let index2 = this.getNameIndex(player.name);\n                                return this.renderPlayer(player, \n                                    {\n                                        className: this.props.parent.state.night.policeVeteranSelected == index2 && \"selected\", \n                                        onClick: () => {\n                                            this.props.parent.state.night.policeVeteranSelected = this.props.parent.state.night.policeVeteranSelected == index2 ? null : index2;\n                                            this.props.parent.setState(this.props.parent.state);\n                                        }\n                                    }\n                                );\n                            })\n                        }\n                    </div>\n                }\n                {\n                    this.props.parent.state.night.veteranSelected\n                    &&\n                    this.props.parent.state.night.doctorSelected == this.props.parent.state.night.veteranSelected\n                    && \n                    this.getRoleAlive(NIGHT_ROUND.Doctor).length > 1\n                    &&\n                    <div className=\"playersStatusCnt\">\n                        <h3>Lista doctori</h3>\n                        <h4>(selecteaza un doctor pentru a-l omori)</h4>\n                        {\n                            this.getRoleAlive(NIGHT_ROUND.Doctor).map((player, index) => {\n                                let index2 = this.getNameIndex(player.name);\n                                return this.renderPlayer(player, this.props.parent.state.night.doctorVeteranSelected == index2 && \"selected\", () => {\n                                    this.props.parent.state.night.doctorVeteranSelected = this.props.parent.state.night.doctorVeteranSelected == index2 ? null : index2;\n                                    this.props.parent.setState(this.props.parent.state);\n                                });\n                            })\n                        }\n                    </div>\n                }\n            </div>\n        )\n    }\n\n    renderNight() {\n        let currentRoundPlayers = this.props.parent.state.players\n            .filter(player => NIGHT_ROUND._roleIsForThisRound(this.props.parent.state.nightCurrentState, player.role) && player.alive)\n            .sort((player1, player2) => player1.role > player2.role);\n            \n        return (\n            <div id=\"nightPage_night\" className=\"main\">\n                <h1>{NIGHT_ROUND._toRoundText(this.props.parent.state.nightCurrentState)}</h1>\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Doctor\n                    &&\n                    <div className=\"specialCnt\">Medicii s-or salvat pe ei de {this.countSpecial(\"timesSavedHimself\")} ori</div>\n                }\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Veteran\n                    &&\n                    <div className=\"specialCnt\">Veteranul o folosit glontul de {this.countSpecial(\"timesUsedBullet\")} ori</div>\n                }\n                <div className=\"playersStatusCnt\">\n                    <h3>Lista jucatori</h3>\n                    {\n                        currentRoundPlayers.map((player, index) => {\n                            let index2 = this.getNameIndex(player.name);\n                            return this.renderPlayer(player, \n                                {\n                                    className: this.state.auxActivated && this.state.auxSelected == index2 && \"selected\", \n                                    onClick: () => {\n                                        this.state.auxSelected = this.state.auxSelected == index2 ? null : index2;\n                                        if (this.state.auxUnique) this.state.selectedPlayer = null;\n                                        this.setState(this.state);\n                                    }\n                                }\n                            );\n                        })\n                    }\n                </div>\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Mafia\n                    &&\n                    this.renderSelectable({ title: \"Posibile victime\", subtitle: \"(selecteaza o victima)\", playersLength: currentRoundPlayers.length })\n                }\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Serialkiller\n                    &&\n                    this.renderSelectable({ title: \"Posibile victime\", subtitle: \"(selecteaza o victima)\", playersLength: currentRoundPlayers.length })\n                }\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Police\n                    &&\n                    this.renderSelectable({ \n                        title: \"Posibili criminali\", \n                        subtitle: \"(selecteaza un jucator)\",\n                        filter: (player1, player2) => roleIsInnocent(player1.role) > roleIsInnocent(player2.role),\n                        className: (player, index) => roleIsInnocent(player.role) ? \"innocent\" : \"guilty\",\n                        player: {\n                            role: (player) => `${roleIsInnocent(player.role) ? \"Inocent\" : \"Vinovant\"} (${PLAYER_ROLES[player.role].text})`\n                        }, \n                        playersLength: currentRoundPlayers.length \n                    })\n                }\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Vigilante\n                    &&\n                    this.renderSelectable({ title: \"Posibile victime\", subtitle: \"(selecteaza o victima sau nu)\", playersLength: currentRoundPlayers.length })\n                }\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Doctor\n                    &&\n                    this.renderSelectable({ title: \"Posibile victime\", subtitle: \"(selecteaza o victima sau nu)\", playersLength: currentRoundPlayers.length })\n                }\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Veteran && currentRoundPlayers.length > 0\n                    &&\n                    this.renderVeteran()\n                }\n                {\n                    this.props.parent.state.nightCurrentState == NIGHT_ROUND.Clown\n                    &&\n                    this.renderSelectable({ title: \"Posibile victime\", subtitle: \"(selecteaza o victima)\", playersLength: 1 })\n                }\n                <div id=\"buttonsCnt\">\n                    <button\n                        id=\"backState\"\n                        onClick={() => {\n                            this.resetBetweenRounds();\n\n                            --this.props.parent.state.nightCurrentOrderIndex;\n                            if (this.props.parent.state.nightCurrentOrderIndex == -1) {\n                                this.props.parent.state.isNight = false;\n                                --this.props.parent.state.dayNumber;\n                                this.props.parent.state.night = Object.assign({}, this.props.parent.state.lastNight);\n                            } else {\n                                this.prepareForNextNight();\n                            }\n\n                            this.props.parent.setState(this.props.parent.state, () => { window.scrollTo(0,0); });\n                        }}\n                    >\n                        Inapoi\n                    </button>\n                    <button \n                        id=\"nextState\"\n                        onClick={() => {\n                            if (this.props.parent.state.nightCurrentState == NIGHT_ROUND.Mafia) {\n                                if (currentRoundPlayers.length > 0 && this.state.selectedPlayer == null) {\n                                    return alert(\"Selecteaza un jucator\");\n                                }\n\n                                if (currentRoundPlayers.length > 0 && this.getRoleIndex(\"Godfather\") == null) {\n                                    if (this.state.auxSelected == null) return alert(\"Selecteaza noul Godfather\");\n                                    else {\n                                        this.props.parent.state.players[this.state.auxSelected].role = \"Godfather\";\n                                    }\n                                }\n\n                                this.props.parent.state.night.mafiaSelected = this.state.selectedPlayer;\n                            } else if (this.props.parent.state.nightCurrentState == NIGHT_ROUND.Serialkiller) {\n                                if (currentRoundPlayers.length > 0 && this.state.selectedPlayer == null) {\n                                    return alert(\"Selecteaza un jucator\");\n                                }\n\n                                this.props.parent.state.night.serialkillerSelected = this.state.selectedPlayer;\n                            } else if (this.props.parent.state.nightCurrentState == NIGHT_ROUND.Police) {\n                                if (currentRoundPlayers.length > 0 && this.state.selectedPlayer == null) {\n                                    return alert(\"Selecteaza un jucator\");\n                                }\n\n                                this.props.parent.state.night.policeSelected = this.state.selectedPlayer;\n                            } else if (this.props.parent.state.nightCurrentState == NIGHT_ROUND.Vigilante) {\n                                this.props.parent.state.night.vigilanteSelected = this.state.selectedPlayer;\n                            } else if (this.props.parent.state.nightCurrentState == NIGHT_ROUND.Veteran) {\n                                if (currentRoundPlayers.length > 0) {\n                                    if (!this.state.veteranButton || this.props.parent.state.night.veteranSelected === undefined) {\n                                        return alert(\"Selecteaza DA sau NU\");\n                                    }\n    \n                                    if (this.props.parent.state.night.veteranSelected) {\n                                        if (this.props.parent.state.night.policeSelected == this.props.parent.state.night.veteranSelected && this.getRoleAlive(NIGHT_ROUND.Police).length > 1 && !this.props.parent.state.night.policeVeteranSelected) {\n                                            return alert(\"Selecteaza un politist\");\n                                        }\n    \n                                        if (this.props.parent.state.night.doctorSelected == this.props.parent.state.night.veteranSelected && this.getRoleAlive(NIGHT_ROUND.Doctor).length > 1 && !this.props.parent.state.night.doctorVeteranSelected) {\n                                            return alert(\"Selecteaza un doctor\");\n                                        }\n    \n                                        console.log(\"police\", this.props.parent.state.night.policeVeteranSelected);\n                                    }\n                                }\n                            } else if (this.props.parent.state.nightCurrentState == NIGHT_ROUND.Doctor) {\n                                if (currentRoundPlayers.length > 0 && this.state.selectedPlayer == null && this.state.auxSelected == null) {\n                                    return alert(\"Selecteaza un jucator\");\n                                }\n\n                                this.props.parent.state.night.doctorSelected = this.state.selectedPlayer || this.state.auxSelected;\n                            } else if (this.props.parent.state.nightCurrentState == NIGHT_ROUND.Clown) {\n                                if (this.state.selectedPlayer == null) {\n                                    return alert(\"Selecteaza un jucator\");\n                                }\n\n                                this.props.parent.state.night.clownSelected = this.state.selectedPlayer;\n                                this.state.vampireMode = false;\n                                console.log(\"CLOOOWN\");\n                            }\n\n                            this.resetBetweenRounds();\n\n                            ++this.props.parent.state.nightCurrentOrderIndex;\n\n                            if (this.props.parent.state.nightCurrentOrderIndex >= this.props.parent.state.nightOrder.length) {\n                                if (this.state.vampireMode) {\n                                    this.prepareForNextNight(true);\n                                } else {\n                                    this.calculateNight();\n                                    this.props.parent.state.lastNight = Object.assign({}, this.props.parent.state.night);\n                                    this.props.parent.state.isNight = false;\n\n                                    this.props.parent.createHash();\n                                }\n                            } else {\n                                this.prepareForNextNight();\n                            }\n                            \n                            this.props.parent.setState(this.props.parent.state, () => { window.scrollTo(0,0); });\n                        }}\n                    >\n                        Urmatorul\n                    </button>\n                </div>\n            </div>\n        )\n    }\n\n    render() {\n        return this.props.parent.state.isNight ? this.renderNight() : this.renderDay();\n    }\n}\n\nclass GeneratorPage extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        <div id=\"generatorPage\" className=\"main\">\n            <h2>Generator</h2>\n            <div id=\"presetCnt\">\n                <div id=\"presetSelectCnt\">\n                    <span>Preset:</span>\n                </div>\n            </div>\n        </div>\n    }\n};\n\nclass MainPage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            gameStep: GAME_STEP.WELCOME,\n            gameSettings: Object.assign({}, DEFAULT_GAME_SETTINGS),\n\n            players: [],\n            nightOrder: DEFAULT_ROUNDS_ORDER.slice(),\n\n            dayNumber: 1,\n            isNight: false,\n\n            nightCurrentState: null,\n            nightCurrentOrderIndex: 0,\n            night: null,\n            lastNight: null\n        };\n\n        this.createHash = this.createHash.bind(this);\n    }\n\n    componentDidMount() {\n        window.packCompresser = window.JsonUrl('pack'); // JsonUrl is added to the window object\n\n        if (window.location.hash) {\n            window.packCompresser.decompress(window.location.hash)\n                .then(json => { \n                    Object.assign(this.state, json);\n\n                    this.state.lastNight = Object.assign({}, this.state.night);\n\n                    this.state.gameStep = GAME_STEP.NIGHT;\n                    this.setState(this.state);\n                });\n        }\n    }\n\n    createHash() {\n        window.packCompresser.compress(\n            { \n                players: this.state.players, \n                night: this.state.night,\n                dayNumber: this.state.dayNumber\n            }\n        ).then(output => window.location.hash = output);\n    }\n\n    render() {\n        let displayBlock = null;\n        if (this.state.gameStep == GAME_STEP.WELCOME) displayBlock = <WelcomePage parent={this}/>\n        else if (this.state.gameStep == GAME_STEP.GAME_SETUP) displayBlock = <GameSetupPage parent={this}/>\n        else if (this.state.gameStep == GAME_STEP.PLAYERS_SETUP) displayBlock = <PlayersSetupPage parent={this}/>\n        else if (this.state.gameStep == GAME_STEP.NIGHT) displayBlock = <NightPage parent={this}/>\n        else if (this.state.gameStep == GAME_STEP.GENERATOR) displayBlock = <GeneratorPage parent={this}/>\n\n        return displayBlock;\n    }\n};\n\nReactDOM.render(\n    <MainPage/>,\n    document.getElementById('root')\n);"]}